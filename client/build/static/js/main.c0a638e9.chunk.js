(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){},42:function(e,t,n){e.exports=n(60)},47:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(38),s=n.n(r),l=(n(47),n(9)),i=n(1),c=n.n(i),m=n(2),p=n(3),u=n(4),d=n(6),h=n(5),f=(n(19),n(27)),g=n(12),y=n(30),b=n(31);f.b.add(g.w,g.j,g.p,g.t,g.f,g.r,g.c,g.b,g.d,g.e,g.g,g.o,g.s,g.l,g.u,y.c,g.m,g.h,y.a,b.c,y.b,g.a,g.n,g.k,g.v,g.q,b.a,b.b,g.i);n(20);var k=n(11),E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={response:"",post:"",responseToPost:"",username:"",password:"",redirect:!1},e.handleSubmit=function(){var t=Object(m.a)(c.a.mark((function t(n){var a,o,r,s,l,i,m,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,fetch("/profile/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.state.username.toLowerCase(),password:e.state.password})});case 3:return a=t.sent,t.next=6,a.text();case 6:if(!(o=t.sent).includes("success")){t.next=34;break}return r=(r=o.split(": ")[1]).split(", token - ")[0],localStorage.setItem("profileImage",r),s=o.split(" - ")[1].split(" username? ")[0],localStorage.setItem("token",s),t.next=15,o.split(" username? ")[1];case 15:return l=t.sent,t.next=18,e.setState({username:l});case 18:return t.next=20,fetch("/profile/getPreferences/"+e.state.username);case 20:return i=t.sent,t.next=23,i.text();case 23:return m=t.sent,t.next=26,JSON.parse(m);case 26:p=t.sent,localStorage.setItem("darkMode",p.darkMode),localStorage.setItem("showNsfw",p.showNsfw),localStorage.setItem("autoShowNsfw",p.autoShowNsfw),localStorage.setItem("autoCheckNsfwOnPosts",p.autoCheckNsfwOnPosts),e.setState({redirect:!0}),t.next=35;break;case 34:"invalid password"===o?e.setState({responseToPost:"Invalid username and/or password"}):"Username does not exist"===o?e.setState({responseToPost:"Username does not exist"}):e.setState({responseToPost:o});case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return localStorage.getItem("plumUser56010")?o.a.createElement(k.c,{to:"/timeline"}):this.state.redirect?(localStorage.setItem("plumUser56010",this.state.username),window.location.reload(!1),o.a.createElement(k.c,{to:"/profile/"+this.state.username.toLowerCase()})):o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"}),o.a.createElement("p",null,this.state.response),o.a.createElement("h2",null,o.a.createElement("strong",null,"Welcome to GifShr")),"Don't have an account? ",o.a.createElement(l.Link,{to:"/accountCreation"},"Sign up!"),o.a.createElement("br",null),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"usernameInput",value:this.state.username,placeholder:"Username or e-mail",onChange:function(t){return e.setState({username:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}})),o.a.createElement("p",null,this.state.responseToPost),o.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"),o.a.createElement("br",null),o.a.createElement("br",null),"Forgot your password? ",o.a.createElement(l.Link,{to:"/passwordRecovery"},"Click here")),o.a.createElement("br",null),o.a.createElement("br",null))}}]),n}(a.Component),v=(n(26),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={response:"",post:"",responseToPost:"",username:"",password:"",repeatPassword:"",email:"",redirect:!1},e.handleSubmit=function(){var t=Object(m.a)(c.a.mark((function t(n){var a,o,r,s,l,i,m,p,u,d,h,f,g;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!localStorage.getItem("lastAccountCreation")){t.next=11;break}return t.next=4,Date.parse(localStorage.getItem("lastAccountCreation"));case 4:if(a=t.sent,!(Date.now()-a<3e5)){t.next=10;break}return e.setState({responseToPost:"You cannot create another account so quickly. Please wait a couple of minutes."}),t.abrupt("return");case 10:e.setState({responseToPost:""});case 11:if(o=!0,r=!0,s=!0,l=document.getElementById("usernameErrorText"),i=document.getElementById("emailErrorText"),m=document.getElementById("usernameInput"),p=document.getElementById("passwordInput"),u=document.getElementById("repeatPasswordInput"),d=document.getElementById("emailInput"),m.style.borderColor="gainsboro",p.style.borderColor="gainsboro",u.style.borderColor="gainsboro",d.style.borderColor="gainsboro",/^\w+$/.test(e.state.username)?(l.style.display="none",o=!0):(l.style.display="inline",o=!1,m.style.borderColor="red"),e.state.email.length<1?(d.style.borderColor="red",s=!1,i.style.display="inline"):(i.style.display="none",s=!0),e.state.password===e.state.repeatPassword){t.next=33;break}e.setState({responseToPost:"Passwords do not match"}),p.style.borderColor="red",u.style.borderColor="red",t.next=45;break;case 33:if(!(e.state.password.length>0&&e.state.username.length>0&&o&&r&&s)){t.next=44;break}return t.next=36,fetch("/profile/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.state.username,password:e.state.password,email:e.state.email})});case 36:return h=t.sent,t.next=39,h.text();case 39:(f=t.sent).includes("success")?(localStorage.setItem("lastAccountCreation",(new Date).toString()),g=f.split(", ")[1],localStorage.setItem("token",g),e.setState({redirect:!0})):"Username already exists"===f?document.getElementById("usernameInput").style.borderColor="red":"An account with this email already exists"===f&&(d.style.borderColor="red"),e.setState({responseToPost:f}),t.next=45;break;case 44:o&&r&&s?(e.setState({responseToPost:"Password cannot be empty"}),p.style.borderColor="red",u.style.borderColor="red"):e.setState({responseToPost:""});case 45:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return localStorage.getItem("plumUser56010")?o.a.createElement(k.c,{to:"/timeline"}):this.state.redirect?(localStorage.setItem("plumUser56010",this.state.username.toLowerCase()),window.location.reload(!1),o.a.createElement(k.c,{to:"/timeline"})):o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"}),o.a.createElement("p",null,this.state.response),o.a.createElement("h2",null,o.a.createElement("strong",null,"Create a GifShr account ")),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",className:"form-control",id:"usernameInput",value:this.state.username,placeholder:"Username",maxLength:"30",onChange:function(t){return e.setState({username:t.target.value})}})),o.a.createElement("div",{id:"usernameErrorText"},"Usernames can only contain letters (a-z), numbers (0-9), underscores (_).",o.a.createElement("br",null)),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",id:"passwordInput",placeholder:"Password",minLength:"5",maxLength:"30",onChange:function(t){return e.setState({password:t.target.value})}})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",id:"repeatPasswordInput",placeholder:"Repeat password",minLength:"5",maxLength:"30",onChange:function(t){return e.setState({repeatPassword:t.target.value})}})),o.a.createElement("div",{className:"form-group"},"NOTE: This email is only used for password recovery. We will not send you anything otherwise.",o.a.createElement("br",null),o.a.createElement("input",{type:"email",className:"form-control",id:"emailInput",placeholder:"Email",minLength:"2",maxLength:"60",onChange:function(t){return e.setState({email:t.target.value})}})),o.a.createElement("div",{id:"emailErrorText",style:{display:"none",color:"red"}},"Please enter a valid email.",o.a.createElement("br",null)),o.a.createElement("p",{id:"responseText"},this.state.responseToPost),o.a.createElement("button",{type:"submit",className:"btn btn-success"},"Create new account")),o.a.createElement(l.Link,{to:"/login"},o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary"},"Back to login")),o.a.createElement("br",null),o.a.createElement("br",null))}}]),n}(a.Component)),w=(n(56),n(33),n(7)),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).retrieveUserInfo=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=2;break}return e.abrupt("return");case 2:if(!(t=localStorage.getItem("plumUser56010"))){e.next=15;break}return e.next=6,fetch("/profile/retrieveProfileInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t,token:localStorage.getItem("token")})});case 6:return n=e.sent,e.next=9,n.text();case 9:if("profile not found."===(o=e.sent)||"error"===o){e.next=15;break}return r=JSON.parse(o),e.next=14,a.setState({loggedInUserFollowing:r.following});case 14:a.checkIfFollowedByUser();case 15:case"end":return e.stop()}}),e)}))),a.checkIfFollowedByUser=function(){var e=window.location.href.split("profile/")[1].split("/")[0].split("#")[0];a.state.loggedInUserFollowing.includes(e)?a.state.followingThisProfile||a.setState({followingThisProfile:!0}):a.state.followingThisProfile&&a.setState({followingThisProfile:!1})},a.profileFollow=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=4;break}return document.getElementById("mustBeSignedIn").style.display="inline",e.abrupt("return");case 4:return a.setState({followingThisProfile:!0}),e.next=7,fetch("/profile/userFollowAction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userFollowing:localStorage.getItem("plumUser56010"),userFollowed:a.props.profile,isFollowing:!0,token:localStorage.getItem("token")})});case 7:return t=e.sent,e.next=10,t.text();case 10:"successful follow/unfollow action"!==e.sent&&alert("Follow action unsuccessful. Please refresh and try again.");case 12:case"end":return e.stop()}}),e)}))),a.profileUnfollow=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=4;break}return document.getElementById("mustBeSignedIn").style.display="inline",e.abrupt("return");case 4:return a.setState({followingThisProfile:!1}),e.next=7,fetch("/profile/userFollowAction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userFollowing:localStorage.getItem("plumUser56010"),userFollowed:a.props.profile,isFollowing:!1,token:localStorage.getItem("token")})});case 7:return t=e.sent,e.next=10,t.text();case 10:"successful follow/unfollow action"!==e.sent&&alert("Unfollow action unsuccessful. Please refresh and try again.");case 12:case"end":return e.stop()}}),e)}))),a.showProfileReportForm=function(){var e=document.getElementById("reportProfileConfirmation");"none"===e.style.display?e.style.display="inline":e.style.display="none"},a.submitProfileReport=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=3;break}return alert("You must be signed in to perform this action."),e.abrupt("return");case 3:return e.next=5,fetch("/report/submitReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defendant:a.props.profile,reportDate:new Date,reportedBy:localStorage.getItem("plumUser56010")})});case 5:return t=e.sent,e.next=8,t.text();case 8:"success"===e.sent?document.getElementById("reportProfileConfirmation").innerHTML="<br />Thank You for submitting your report. A human will review this profile.":alert("Report failed. Please try again later.");case 10:case"end":return e.stop()}}),e)}))),a.state={followingThisProfile:!1,loggedInUserFollowing:a.props.followingList},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.retrieveUserInfo()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.url!==e.url&&this.checkIfFollowedByUser()}},{key:"render",value:function(){return this.props.profile===localStorage.getItem("plumUser56010")?o.a.createElement("div",{id:"ownProfileOptions"},o.a.createElement(l.Link,{to:"/editProfile"},o.a.createElement("button",{type:"button",className:"true"===localStorage.getItem("darkMode")?"btn btn-primary":"btn btn-outline-primary"},"Edit Profile \xa0",o.a.createElement(w.a,{icon:"cog"}))),o.a.createElement(l.Link,{to:"/createPost"},o.a.createElement("button",{type:"button",className:"true"===localStorage.getItem("darkMode")?"btn btn-success":"btn btn-outline-success"},"New post \xa0",o.a.createElement(w.a,{icon:"plus"})))):this.state.followingThisProfile?o.a.createElement("div",null,o.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.profileUnfollow,style:{width:"200px",marginLeft:"10px"}},"Unfollow"),o.a.createElement("br",null),o.a.createElement("button",{className:"commentActionButton postActionButton postReportButton",id:"profileReportButton",onClick:this.showProfileReportForm,style:{marginLeft:"20px",marginTop:"20px",verticalAlign:"bottom",width:"120px"}},o.a.createElement(w.a,{icon:"flag",id:"postReportIcon"}),"Report Profile"),o.a.createElement("div",{id:"reportProfileConfirmation",style:{display:"none"}},o.a.createElement("br",null),"Would you like us to review this profile?",o.a.createElement("button",{onClick:this.submitProfileReport},"Yes"),o.a.createElement("button",{onClick:this.showProfileReportForm},"No"))):o.a.createElement("div",null,o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.profileFollow,style:{width:"200px",marginLeft:"10px"}},"Follow"),o.a.createElement("br",null),o.a.createElement("button",{className:"commentActionButton postActionButton postReportButton",id:"profileReportButton",onClick:this.showProfileReportForm,style:{marginLeft:"20px",marginTop:"20px",width:"120px"}},o.a.createElement(w.a,{icon:"flag",id:"postReportIcon"}),"Report Profile"),o.a.createElement("div",{id:"reportProfileConfirmation",style:{display:"none"}},o.a.createElement("br",null),"Would you like us to review this profile?",o.a.createElement("button",{onClick:this.submitProfileReport},"Yes"),o.a.createElement("button",{onClick:this.showProfileReportForm},"No")),o.a.createElement("div",{id:"mustBeSignedIn",style:{display:"none"}},o.a.createElement("br",null),"You must be signed in to perform this action."))}}]),n}(a.Component),x=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).retrieveProfileInfo=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,t.split("profile/")[1];case 3:if(!(n=e.sent).includes("/")){e.next=8;break}return e.next=7,n.split("/")[0];case 7:n=e.sent;case 8:return n=n.toLowerCase(),e.next=11,fetch("/profile/retrieveProfileInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:n,token:localStorage.getItem("token"),profileHeader:"please send counts only"})});case 11:return o=e.sent,e.next=14,o.text();case 14:if(r=e.sent,"profile not found.","profile not found."!==r){e.next=20;break}a.setState({response:"profile not found."}),e.next=34;break;case 20:if(!r.includes("<")&&"error"!==r){e.next=24;break}a.setState({response:"Please reload page to see profile info."}),e.next=34;break;case 24:return e.next=26,JSON.parse(r);case 26:return s=e.sent,e.next=29,a.setState({profileName:s.username,postCount:s.postCount,followerCount:s.followerCount,followingCount:s.followingCount,profileImage:s.profileImage,description:s.description,profilePicNsfw:s.profilePicNsfw});case 29:if(!s.profilePicNsfw){e.next=33;break}if("false"!==localStorage.getItem("showNsfw")){e.next=33;break}return e.next=33,a.setState({profileImage:"/nsfw_post_in_grid_with_auto_nsfw_off.png"});case 33:a.setNumberConversions();case 34:case"end":return e.stop()}}),e)}))),a.setNumberConversions=function(){var e=a.state.followerCount,t=a.state.followingCount,n=a.state.postCount;if(e>=1e6)a.setState({followerCount:(e/1e6).toFixed(1)+"M"});else if(e>=1e5)a.setState({followerCount:Math.round(e/1e3)+"K"});else if(e>=1e4)a.setState({followerCount:(e/1e3).toFixed(1)+"K"});else if(e>=1e3){var o=e.toString();a.setState({followerCount:o[0]+","+o.substring(1,4)})}if(t>=1e6)a.setState({followingCount:(t/1e6).toFixed(1)+"M"});else if(t>=1e5)a.setState({followingCount:Math.round(t/1e3)+"K"});else if(t>=1e4)a.setState({followingCount:(t/1e3).toFixed(1)+"K"});else if(t>=1e3){var r=t.toString();a.setState({followingCount:r[0]+","+r.substring(1,4)})}if(n>=1e4)a.setState({postCount:(n/1e3).toFixed(1)+"K"});else if(n>=1e3){var s=n.toString();a.setState({postCount:s[0]+","+s.substring(1,4)})}},a.state={response:"",profileName:"",postCount:0,followingCount:0,followerCount:0,description:"",profilePicNsfw:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.retrieveProfileInfo().catch((function(e){return console.log(e)}))}},{key:"componentDidUpdate",value:function(e,t,n){this.props.url!==e.url&&this.retrieveProfileInfo().catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.response?o.a.createElement("div",{className:"App"},o.a.createElement("h4",null,this.state.response)):o.a.createElement("div",{className:"App",id:"profileHeader"},o.a.createElement("span",{id:"profilePicInProfileHeader"},o.a.createElement("img",{id:"profilePicture",src:""+this.state.profileImage,alt:"profile"})),o.a.createElement("span",{id:"profileStats"},o.a.createElement("br",null),o.a.createElement("h5",{id:"profileHeaderProfileName"},this.state.profileName),this.state.followerCount," Followers \xa0\xa0",this.state.followingCount," Following \xa0\xa0",this.state.postCount," posts"),o.a.createElement("div",{style:{clear:"both"}}),o.a.createElement("br",null),o.a.createElement("p",{id:"profileHeaderDescription"},this.state.description),o.a.createElement(S,{profile:this.state.profileName,followingList:this.props.loggedInUserFollowing,url:this.props.url}))}}]),n}(a.Component),I=(n(57),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleReport=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l,i,m,p,u,d,h,f,g,y,b,k,E,v;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("reportError"+a.props.id),localStorage.getItem("plumUser56010")){e.next=4;break}return a.props.isPost?(document.getElementById("mustBeSignedIn").style.display="inline",alert("You must be signed in to perform this action.")):alert("You must be signed in to perform this action."),e.abrupt("return");case 4:if(!a.props.isPost){e.next=52;break}if(!a.props.nsfw){e.next=27;break}if(n=document.getElementById("reportRule1"+a.props.id),o=document.getElementById("reportRule2"+a.props.id),r=document.getElementById("reportRule5"+a.props.id),s=[],n.checked&&s.push(1),o.checked&&s.push(2),r.checked&&s.push(5),!(s.length>0)){e.next=24;break}return e.next=16,fetch("/report/submitReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defendant:a.props.profile,postId:a.props.id,reportDate:new Date,rulesReported:s,reportedBy:localStorage.getItem("plumUser56010")})});case 16:return l=e.sent,e.next=19,l.text();case 19:"success"===e.sent?a.setState({submitted:!0}):a.setState({reportFailed:!0}),t.style.display="none",e.next=25;break;case 24:t.style.display="inline";case 25:e.next=50;break;case 27:if(i=document.getElementById("reportRule1"+a.props.id),m=document.getElementById("reportRule2"+a.props.id),p=document.getElementById("reportRule3"+a.props.id),u=document.getElementById("reportRule4"+a.props.id),d=document.getElementById("reportRule5"+a.props.id),h=[],i.checked&&h.push(1),m.checked&&h.push(2),p.checked&&h.push(3),u.checked&&h.push(4),d.checked&&h.push(5),!(h.length>0)){e.next=49;break}return e.next=41,fetch("/report/submitReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defendant:a.props.profile,postId:a.props.id,reportDate:new Date,rulesReported:h,reportedBy:localStorage.getItem("plumUser56010")})});case 41:return f=e.sent,e.next=44,f.text();case 44:"success"===e.sent?a.setState({submitted:!0}):a.setState({reportFailed:!0}),t.style.display="none",e.next=50;break;case 49:t.style.display="inline";case 50:e.next=73;break;case 52:if(g=document.getElementById("reportRule1"+a.props.id),y=document.getElementById("reportRule2"+a.props.id),b=document.getElementById("reportRule3"+a.props.id),k=document.getElementById("reportRule5"+a.props.id),E=[],g.checked&&E.push(1),y.checked&&E.push(2),b.checked&&E.push(3),k.checked&&E.push(5),!(E.length>0)){e.next=72;break}return e.next=64,fetch("/report/submitReport",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({defendant:a.props.profile,commentId:a.props.id,reportDate:new Date,rulesReported:E,reportedBy:localStorage.getItem("plumUser56010")})});case 64:return v=e.sent,e.next=67,v.text();case 67:"success"===e.sent?a.setState({submitted:!0}):a.setState({reportFailed:!0}),t.style.display="none",e.next=73;break;case 72:t.style.display="inline";case 73:case"end":return e.stop()}}),e)}))),a.state={submitted:!1,reportFailed:!1},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(m.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.id!==t.id&&this.setState({submitted:!1,reportFailed:!1});case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.submitted?o.a.createElement("div",null,"Every report is reviewed by a human, we take your report seriously. Thank You!"):this.state.reportFailed?o.a.createElement("div",null,"Report failed. Please try again later."):this.props.isPost&&!this.props.nsfw?o.a.createElement("div",null,"Which rules has this post broken?",o.a.createElement("br",null),"Select all that apply:",o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule1"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule1"+this.props.id},"Inappropriate content involving minor(s)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule2"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule2"+this.props.id},"Content containing abusive, harmful or illegal behavior")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule3"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule3"+this.props.id},"Offensive language i.e. threats, obscene racism")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule4"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule4"+this.props.id},"Inappropriate/sexual content (missing NSFW tag)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule5"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule5"+this.props.id},"Spam, scamming or phishing")),o.a.createElement("div",{id:"reportError"+this.props.id,style:{color:"red",display:"none"}},"You must select at least one rule to report. ",o.a.createElement("br",null)),o.a.createElement("button",{type:"button",className:"btn btn-secondary reportButton",onClick:this.handleReport},"Report"),o.a.createElement("div",{id:"mustBeSignedIn",style:{display:"none"}},o.a.createElement("br",null),"You must be signed in to perform this action. \xa0",o.a.createElement("a",{href:"/login"},"Sign in here."))):this.props.isPost&&this.props.nsfw?o.a.createElement("div",null,"Which rules has this post broken?",o.a.createElement("br",null),"Select all that apply:",o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule1"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule1"+this.props.id},"Inappropriate content involving minor(s)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule2"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule2"+this.props.id},"Content containing abusive, harmful or illegal behavior")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule5"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule5"+this.props.id},"Spam, scamming or phishing")),o.a.createElement("div",{id:"reportError"+this.props.id,style:{color:"red",display:"none"}},"You must select at least one rule to report. ",o.a.createElement("br",null)),o.a.createElement("button",{type:"button",className:"btn btn-secondary reportButton",onClick:this.handleReport},"Report"),o.a.createElement("div",{id:"mustBeSignedIn",style:{display:"none"}},o.a.createElement("br",null),"You must be signed in to perform this action. \xa0",o.a.createElement("a",{href:"/login"},"Sign in here."))):o.a.createElement("div",null,"Which rules has this comment broken?",o.a.createElement("br",null),"Select all that apply:",o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule1"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule1"+this.props.id},"Inappropriate content involving minor(s)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule2"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule2"+this.props.id},"Content containing abusive, harmful or illegal behavior")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule3"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule3"+this.props.id},"Offensive language i.e. threats, obscene racism")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"reportRule5"+this.props.id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"reportRule5"+this.props.id},"Spam, scamming or phishing")),o.a.createElement("div",{id:"reportError"+this.props.id,style:{color:"red",display:"none"}},"You must select at least one rule to report. ",o.a.createElement("br",null)),o.a.createElement("button",{type:"button",className:"btn btn-outline-secondary reportButton",onClick:this.handleReport},"Report"))}}]),n}(a.Component)),P=["far","thumbs-up"],N=["fas","thumbs-up"],B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).checkIfCommentBelongsToUser=function(){a.props.username===localStorage.getItem("plumUser56010")&&(document.getElementById("commentDeleteButton"+a.state.id).style.display="inline")},a.checkMarginBarrier=function(){var e=document.getElementById(a.state.id);a.props.isReply&&(e.style.marginLeft="-20px",e.style.marginTop="10px"),a.state.replyDepth>=3&&(e.style.marginLeft="-44px"),a.state.replyDepth>=4&&(e.style.marginLeft="-55px")},a.checkIfLikedByUser=Object(m.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.props.likedCommentsByUser.includes(a.props.commentId)&&a.setState({commentLikeIcon:N,likeOrLiked:"Liked"});case 1:case"end":return e.stop()}}),e)}))),a.retrieveProfileImage=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/profile/retrieveProfileImage/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:o=e.sent,a.setState({profileImage:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),a.likeComment=Object(m.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=3;break}return alert("You must be signed in to perform this action."),e.abrupt("return");case 3:if(a.state.commentLikeIcon!==P){e.next=9;break}return e.next=6,a.setState({commentLikeIcon:N,likeOrLiked:"Liked",likeOrLikes:a.state.likes+1===1?"Like":"Likes",likes:a.state.likes+1});case 6:t=!0,e.next=12;break;case 9:return e.next=11,a.setState({commentLikeIcon:P,likeOrLiked:"Like",likeOrLikes:a.state.likes-1===1?"Like":"Likes",likes:a.state.likes-1});case 11:t=!1;case 12:return e.next=14,fetch("/comments/userLiked",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:a.state.id,liked:t,likedBy:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 14:return n=e.sent,e.next=17,n.text();case 17:"success"!==e.sent&&(t?a.setState({likes:a.state.likes-1}):a.setState({likes:a.state.likes+1}),alert("failed to like comment. Please check connection and try again."));case 19:case"end":return e.stop()}}),e)}))),a.displayReplies=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("commentReplies"+a.state.id),n=document.getElementById("commentsCaretDown"+a.state.id),"inline"===(o=document.getElementById("commentsCaretUp"+a.state.id)).style.display?(t.style.display="none",n.style.display="inline",o.style.display="none"):(t.style.display="inline",n.style.display="none",o.style.display="inline",a.retrieveCommentReplies());case 4:case"end":return e.stop()}}),e)}))),a.replyToComment=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"inline"===(t=document.getElementById("commentReplyForm"+a.state.id)).style.display?t.style.display="none":t.style.display="inline";case 2:case"end":return e.stop()}}),e)}))),a.enableButton=function(){var e=document.getElementById("replyToCommentTextarea"+a.state.id),t=document.getElementById("postCommentReplyButton"+a.state.id);e.value.length>0?(t.disabled=!1,t.addEventListener("click",a.handleCommentReplyPost,!1)):(t.disabled=!0,t.removeEventListener("click",a.handleCommentReplyPost,!1))},a.retrieveComments=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.post._id,e.next=3,fetch("/comments/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:if(!(o=e.sent)){e.next=20;break}r=JSON.parse(o),s=[],e.t0=c.a.keys(r);case 11:if((e.t1=e.t0()).done){e.next=17;break}return l=e.t1.value,e.next=15,s.push({profile:r[l].profile,content:r[l].content,likes:r[l].likes,replies:r[l].replies,id:r[l]._id});case 15:e.next=11;break;case 17:a.setState({comments:s}),e.next=21;break;case 20:alert("failed to retrieve comments.");case 21:case"end":return e.stop()}}),e)}))),a.handleCommentReplyPost=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=3;break}return alert("You must be signed in to perform this action."),e.abrupt("return");case 3:return t=document.getElementById("replyToCommentTextarea"+a.state.id),n=document.getElementById("postCommentReplyButton"+a.state.id),console.log("here"),e.next=8,fetch("/comments/reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentText:t.value,commentToAddReply:a.state.id,user:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 8:return o=e.sent,e.next=11,o.text();case 11:r=e.sent,console.log("body: "+r),"success"===r?(console.log("comment posted"),t.value="",n.disabled=!0,t.style.display="none",n.style.display="none",a.retrieveCommentReplies()):alert("failed to post comment. Please check connection and try again.");case 14:case"end":return e.stop()}}),e)}))),a.retrieveCommentReplies=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.id,e.next=3,fetch("/comments/replies/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:if(!(o=e.sent)){e.next=21;break}r=JSON.parse(o),s=[],e.t0=c.a.keys(r);case 11:if((e.t1=e.t0()).done){e.next=17;break}return l=e.t1.value,e.next=15,s.push({profile:r[l].profile,content:r[l].content,likes:r[l].likes,replies:r[l].replies,id:r[l]._id});case 15:e.next=11;break;case 17:return e.next=19,a.setState({replies:s,repliesLoaded:!0});case 19:e.next=22;break;case 21:alert("failed to retrieve replies.");case 22:case"end":return e.stop()}}),e)}))),a.reportComment=function(){var e=document.getElementById("reportForm"+a.state.id),t=document.getElementById(a.state.id);"inline"===e.style.display?(e.style.display="none",a.state.replyDepth>=4?t.style.marginLeft="-55px":a.state.replyDepth>=3?t.style.marginLeft="-44px":a.state.isReply&&(t.style.marginLeft="-20px")):(e.style.display="inline",t.style.marginLeft="0px")},a.deleteComment=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/comments/deleteComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token"),commentId:a.state.id,postId:a.props.postId})});case 2:return t=e.sent,e.next=5,t.text();case 5:"success"!==e.sent?alert("Deleting comment failed. Try again."):console.log("deleted");case 7:case"end":return e.stop()}}),e)}))),a.state={username:a.props.username,profileImage:a.props.profileImage,content:a.props.content,profileLink:a.props.profileLink,likes:a.props.likes.length,replies:a.props.replies,id:a.props.commentId,commentLikeIcon:P,repliesLoaded:!1,likeOrLiked:"Like",likeOrLikes:1===a.props.likes.length?"Like":"Likes",replyDepth:a.props.replyDepth||0,replyingTo:a.props.replyingTo||""},a.retrieveProfileImage(a.props.username),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkIfLikedByUser(),this.checkMarginBarrier(),this.checkIfCommentBelongsToUser()}},{key:"render",value:function(){var e=this,t=this.state.content,a="";this.state.replyingTo&&(a="@"+this.state.replyingTo+" ");var r,s="";return s=1===this.state.replies.length?"Reply":"Replies",this.props.isTimeline||(r=o.a.createElement("br",null)),this.state.repliesLoaded?o.a.createElement("div",{className:"media comment",id:this.state.id},o.a.createElement("a",{href:this.state.profileLink},o.a.createElement("img",{id:"searchResultPic",src:this.state.profileImage,className:"mr-3",alt:"profile"})),o.a.createElement("div",{className:"media-body",id:"profilePreviewDetails"},o.a.createElement("a",{href:this.state.profileLink,style:{color:""}},o.a.createElement("h6",{className:"mt-0 mb-0",id:"profilePreviewName"},this.state.username)),r,a,t," ",o.a.createElement("br",null),o.a.createElement("button",{className:"commentActionButton",id:"commentLikeButton"+this.state.id,onClick:this.likeComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:this.state.commentLikeIcon}),this.state.likeOrLiked),this.state.likes," ",this.state.likeOrLikes,o.a.createElement("button",{className:"commentActionButton",id:"displayRepliesButton",onClick:this.displayReplies,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},this.state.replies.length+" "+s,o.a.createElement(w.a,{icon:"caret-down",className:"commentsCaretDown",id:"commentsCaretDown"+this.state.id}),o.a.createElement(w.a,{icon:"caret-up",className:"commentsCaretUp",id:"commentsCaretUp"+this.state.id})),o.a.createElement("button",{className:"commentActionButton",id:"replyToCommentButton",onClick:this.replyToComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},"Reply"),o.a.createElement("button",{className:"commentActionButton",id:"commentReportButton",onClick:this.reportComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},"Report"),o.a.createElement("button",{className:"commentActionButton",id:"commentDeleteButton"+this.state.id,onClick:this.deleteComment,style:{color:"#c91616",display:"none",marginLeft:"5px",width:"20px"}},o.a.createElement(w.a,{icon:["fas","trash-alt"]})),o.a.createElement("br",null),o.a.createElement("div",{id:"reportForm"+this.state.id,style:{display:"none"}},o.a.createElement(I,{isPost:!1,id:this.state.id,profile:this.state.username}),o.a.createElement("br",null)),o.a.createElement("div",{id:"commentReplyForm"+this.state.id,className:"commentReplyForm"},o.a.createElement("textarea",{id:"replyToCommentTextarea"+this.state.id,className:"form-control",placeholder:"Reply to comment...",rows:"2",onChange:this.enableButton}),o.a.createElement("button",{type:"button",id:"postCommentReplyButton"+this.state.id,className:"btn btn-primary",disabled:!0},"Post reply"),o.a.createElement("br",null)),o.a.createElement("div",{id:"commentReplies"+this.state.id,className:"commentReplies"},this.state.replies.map((function(t,a){return o.a.createElement(n,{username:t.profile,content:t.content,profileLink:"/profile/"+t.profile,likes:t.likes,replies:t.replies,commentId:t.id,isReply:!0,replyDepth:e.state.replyDepth+1,replyingTo:e.state.username,likedCommentsByUser:e.props.likedCommentsByUser,postId:e.props.postId,key:a})}))))):o.a.createElement("div",{className:"media comment",id:this.state.id},o.a.createElement("a",{href:this.state.profileLink},o.a.createElement("img",{id:"searchResultPic",src:this.state.profileImage,className:"mr-3",alt:"profile"})),o.a.createElement("div",{className:"media-body",id:"profilePreviewDetails"},o.a.createElement("a",{href:this.state.profileLink},o.a.createElement("h6",{className:"mt-0 mb-0",id:"profilePreviewName"},this.state.username)),r,a,t," ",o.a.createElement("br",null),o.a.createElement("button",{className:"commentActionButton",id:"commentLikeButton",onClick:this.likeComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:this.state.commentLikeIcon}),this.state.likeOrLiked),this.state.likes," ",this.state.likeOrLikes,o.a.createElement("button",{className:"commentActionButton",id:"displayRepliesButton",onClick:this.displayReplies,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},this.state.replies.length+" "+s,o.a.createElement(w.a,{icon:"caret-down",className:"commentsCaretDown",id:"commentsCaretDown"+this.state.id}),o.a.createElement(w.a,{icon:"caret-up",className:"commentsCaretUp",id:"commentsCaretUp"+this.state.id})),o.a.createElement("button",{className:"commentActionButton",id:"replyToCommentButton",onClick:this.replyToComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},"Reply"),o.a.createElement("button",{className:"commentActionButton",id:"commentReportButton",onClick:this.reportComment,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},"Report"),o.a.createElement("button",{className:"commentActionButton",id:"commentDeleteButton"+this.state.id,onClick:this.deleteComment,style:{color:"#c91616",display:"none",marginLeft:"5px",width:"20px"}},o.a.createElement(w.a,{icon:["fas","trash-alt"]})),o.a.createElement("br",null),o.a.createElement("div",{id:"reportForm"+this.state.id,style:{display:"none"}},o.a.createElement(I,{isPost:!1,id:this.state.id,profile:this.state.username}),o.a.createElement("br",null)),o.a.createElement("div",{id:"commentReplyForm"+this.state.id,className:"commentReplyForm"},o.a.createElement("textarea",{id:"replyToCommentTextarea"+this.state.id,className:"form-control",placeholder:"Reply to comment...",rows:"2",onChange:this.enableButton}),o.a.createElement("button",{type:"button",id:"postCommentReplyButton"+this.state.id,className:"btn btn-primary",disabled:!0},"Post reply"),o.a.createElement("br",null)),o.a.createElement("div",{id:"commentReplies"+this.state.id,className:"commentReplies"},"Loading replies...")))}}]),n}(a.Component),C=n(29),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).displayComments=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("commentsCaretDown"+a.props.post._id),n=document.getElementById("commentsCaretUp"+a.props.post._id),o=document.getElementById("commentsSection"+a.props.post._id),"inline"===n.style.display?(t.style.display="inline",n.style.display="none",o.style.display="none"):(t.style.display="none",n.style.display="inline",o.style.display="inline",a.retrieveComments());case 4:case"end":return e.stop()}}),e)}))),a.retrieveComments=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.post._id,e.next=3,fetch("/comments/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:if(!(o=e.sent)){e.next=20;break}r=JSON.parse(o),s=[],e.t0=c.a.keys(r);case 11:if((e.t1=e.t0()).done){e.next=17;break}return l=e.t1.value,e.next=15,s.push({profile:r[l].profile,content:r[l].content,likes:r[l].likes,replies:r[l].replies,id:r[l]._id});case 15:e.next=11;break;case 17:a.setState({comments:s}),e.next=21;break;case 20:alert("failed to retrieve comments.");case 21:case"end":return e.stop()}}),e)}))),a.enableButton=function(){var e=document.getElementById("commentTextarea"+a.props.post._id),t=document.getElementById("postCommentButton"+a.props.post._id);e.value.length>0?(t.disabled=!1,t.addEventListener("click",a.handleCommentPost,!1)):(t.disabled=!0,t.removeEventListener("click",a.handleCommentPost,!1))},a.handleCommentPost=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=4;break}return document.getElementById("mustBeSignedInCommentPost"+a.props.post._id).style.display="inline",e.abrupt("return");case 4:return t=document.getElementById("commentTextarea"+a.props.post._id),e.next=7,fetch("/comments/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentText:t.value,postId:a.props.post._id,user:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 7:return n=e.sent,e.next=10,n.text();case 10:o=e.sent,console.log("body: "+o),"success"===o?(console.log("comment posted"),t.value="",a.setState({numComments:a.state.numComments+1}),a.retrieveComments()):alert("failed to post comment. Please try again.");case 13:case"end":return e.stop()}}),e)}))),a.state={post:a.props.post,numComments:a.props.post.comments.length,comments:[],isFromProfile:a.props.isFromProfile},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.state.isFromProfile||this.displayComments()}},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.post===t.post){e.next=4;break}return e.next=3,this.setState({post:this.props.post,comments:[],numComments:this.props.post.comments.length});case 3:this.retrieveComments();case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.isFromProfile&&!this.props.isTimeline?o.a.createElement("div",{id:"commentsLink",className:"commentsLink"},o.a.createElement(C.HashLink,{to:"/profile/"+this.state.post.profile+"/"+this.state.post.postId+"#commentsButton"},this.state.post.comments.length," comments")):o.a.createElement("div",{id:"comments"+this.props.post._id,className:"comments"},o.a.createElement("button",{id:"commentsButton"+this.props.post._id,className:"commentsButton",onClick:this.displayComments},this.state.numComments," comments",o.a.createElement(w.a,{icon:"caret-down",id:"commentsCaretDown"+this.props.post._id,className:"commentsCaretDown"}),o.a.createElement(w.a,{icon:"caret-up",id:"commentsCaretUp"+this.props.post._id,className:"commentsCaretUp"})),o.a.createElement("br",null),o.a.createElement("div",{id:"mustBeSignedInCommentPost"+this.props.post._id,style:{display:"none",color:"red"}},o.a.createElement("br",null),"You must be signed in to perform this action. \xa0",o.a.createElement("a",{href:"/login"},"Sign in here.")),o.a.createElement("div",{id:"commentsSection"+this.props.post._id,className:"commentsSection"},o.a.createElement("textarea",{className:"form-control commentTextarea",id:"commentTextarea"+this.props.post._id,placeholder:"Write a comment...",rows:"2",onChange:this.enableButton}),o.a.createElement("br",null),o.a.createElement("button",{type:"button",id:"postCommentButton"+this.props.post._id,className:"btn btn-primary postCommentButton",disabled:!0},"Post"),this.state.comments.map((function(t,n){return o.a.createElement(B,{username:t.profile,content:t.content,profileLink:"/profile/"+t.profile,likes:t.likes,replies:t.replies,commentId:t.id,likedCommentsByUser:e.props.likedCommentsByUser,key:n,isTimeline:e.props.isTimeline,postId:e.props.postId})}))))}}]),n}(a.Component),T=n(61),L=n(63),j=n(65),U=n(62),R=n(64),F=n(66),_=["far","thumbs-up"],D=["fas","thumbs-up"],M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(p.a)(this,n),(a=t.call(this,e)).checkDarkMode=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("postLikeButton"+a.state.post._id),n=document.getElementById("postShareButton"+a.state.post._id),o=document.getElementById("postReportButton"+a.state.post._id),"true"===localStorage.getItem("darkMode")&&(t.style.color="#b5b5b5",n.style.color="#b5b5b5",o.style.color="#b5b5b5");case 4:case"end":return e.stop()}}),e)}))),a.checkIfPostBelongsToUser=function(){var e=document.getElementById("postDeleteButton"+a.state.post._id);a.state.post.profile===localStorage.getItem("plumUser56010")?e.style.display="inline":e.style.display="none"},a.checkIfLikedByUser=function(){for(var e in a.props.likedPostsByUser)if(a.props.likedPostsByUser[e]._id===a.state.post._id)return void a.setState({postLikeIcon:D,likeOrLiked:"Liked"})},a.likePost=Object(m.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=4;break}return document.getElementById("mustBeSignedIn").style.display="inline",e.abrupt("return");case 4:if(a.state.postLikeIcon!==_){e.next=10;break}return e.next=7,a.setState({postLikeIcon:D,likeOrLiked:"Liked",likeOrLikes:a.state.likes+1===1?"Like":"Likes",likes:a.state.likes+1});case 7:t=!0,e.next=13;break;case 10:return e.next=12,a.setState({postLikeIcon:_,likeOrLiked:"Like",likeOrLikes:a.state.likes-1===1?"Like":"Likes",likes:a.state.likes-1});case 12:t=!1;case 13:return e.next=15,fetch("/posts/userLiked",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:a.state.post._id,liked:t,likedBy:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 15:return n=e.sent,e.next=18,n.text();case 18:"success"!==e.sent&&(t?a.setState({likes:a.state.likes-1}):a.setState({likes:a.state.likes+1}),alert("failed to like post. Please check connection and try again."));case 20:case"end":return e.stop()}}),e)}))),a.sharePost=function(){var e=document.getElementById("shareOptions"+a.state.post._id);"inline"===e.style.display?e.style.display="none":e.style.display="inline"},a.copyPostLink=Object(m.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("copiedLinkConfirmationText"+a.state.post._id),(n=document.getElementById("linkToSharePost"+a.state.post._id)).style.display="inline",n.select(),n.setSelectionRange(0,99999),e.next=7,document.execCommand("copy");case 7:n.style.display="none",t.style.display="inline";case 9:case"end":return e.stop()}}),e)}))),a.reportPost=function(){var e=document.getElementById("reportForm"+a.state.post._id);"inline"===e.style.display?e.style.display="none":e.style.display="inline"},a.showDeleteConfirmation=function(){document.getElementById("postDeleteConfirmation"+a.state.post._id).style.display="inline"},a.hideDeleteConfirmation=function(){document.getElementById("postDeleteConfirmation"+a.state.post._id).style.display="none"},a.deletePost=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("postDeletedMessage"+a.state.post._id).style.display="inline",e.next=4,fetch("/posts/deletePost/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({post:a.state.post,username:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 4:return t=e.sent,e.next=7,t.text();case 7:"success"!==e.sent?alert("Deleting comment failed. Try again."):console.log("deleted");case 9:case"end":return e.stop()}}),e)})));var o="localhost:3000/profile/"+a.props.post.profile+"/"+a.props.post.postId;return a.state={post:a.props.post,postLikeIcon:_,likedPostsByUser:a.props.likedPostsByUser,likes:a.props.post.likes.length,likeOrLiked:"Like",likeOrLikes:1===a.props.post.likes.length?"Like":"Likes",linkToSharePost:o},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkIfLikedByUser(),this.checkIfPostBelongsToUser(),this.checkDarkMode()}},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(c.a.mark((function e(t,n,a){var o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.post===t.post){e.next=12;break}return e.next=3,this.setState({post:this.props.post,postLikeIcon:_,likedPostsByUser:this.props.likedPostsByUser,likes:this.props.post.likes.length,likeOrLiked:"Like",likeOrLikes:1===this.props.post.likes.length?"Like":"Likes",linkToSharePost:"localhost:3000/profile/"+this.props.post.profile+"/"+this.props.post.postId});case 3:this.checkIfLikedByUser(),this.checkIfPostBelongsToUser(),"inline"===(o=document.getElementById("shareOptions"+this.state.post._id)).style.display&&(o.style.display="none"),"inline"===(r=document.getElementById("reportForm"+this.state.post._id)).style.display&&(r.style.display="none"),this.hideDeleteConfirmation(),e.next=13;break;case 12:this.props.likedPostsByUser!==t.likedPostsByUser&&this.checkIfLikedByUser();case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{id:"postActions"},o.a.createElement("button",{className:"commentActionButton postActionButton",id:"postLikeButton"+this.state.post._id,onClick:this.likePost},o.a.createElement(w.a,{icon:this.state.postLikeIcon,id:"postLikeIcon"}),this.state.likeOrLiked),"\xa0",o.a.createElement("button",{className:"commentActionButton postActionButton",id:"postShareButton"+this.state.post._id,onClick:this.sharePost},o.a.createElement(w.a,{icon:"share",id:"postShareIcon"}),"Share"),"\xa0 \xa0",o.a.createElement("button",{className:"commentActionButton postActionButton postReportButton",id:"postReportButton"+this.state.post._id,onClick:this.reportPost},o.a.createElement(w.a,{icon:"flag",id:"postReportIcon"}),"Report"),o.a.createElement("button",{className:"commentActionButton postActionButton postDeleteButton",id:"postDeleteButton"+this.state.post._id,onClick:this.showDeleteConfirmation,style:{color:"#c91616",marginLeft:"10px",display:"none",width:"30px"}},o.a.createElement(w.a,{icon:["fas","trash-alt"]})),o.a.createElement("div",{id:"postDeleteConfirmation"+this.state.post._id,style:{display:"none"}},o.a.createElement("br",null),"Are you sure you want to delete this post?",o.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:this.deletePost,style:{marginRight:"5px"}},"Yes"),o.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:this.hideDeleteConfirmation,style:{marginRight:"5px"}},"No")),o.a.createElement("div",{id:"postDeletedMessage"+this.state.post._id,style:{display:"none"}},"This post has been deleted."),o.a.createElement("div",{id:"mustBeSignedIn",style:{display:"none"}},o.a.createElement("br",null),"You must be signed in to perform this action. \xa0",o.a.createElement("a",{href:"/login"},"Sign in here.")),o.a.createElement("div",{id:"reportForm"+this.state.post._id,style:{display:"none"}},o.a.createElement("br",null),o.a.createElement(I,{isPost:!0,nsfw:this.state.post.nsfw,id:this.state.post._id,profile:this.state.post.profile})),o.a.createElement("br",null),o.a.createElement("div",{id:"shareOptions"+this.state.post._id,style:{display:"none"}},o.a.createElement("button",{className:"commentActionButton postActionButton",id:"copyPostLinkButton"+this.state.post._id,onClick:this.copyPostLink},o.a.createElement(w.a,{icon:["far","clipboard"]}),"\xa0 Copy"),o.a.createElement(T.a,{url:this.state.linkToSharePost,className:"socialMediaShareLink"},o.a.createElement(U.a,{round:!0,className:"socialMediaShareIcon"})),o.a.createElement(L.a,{url:this.state.linkToSharePost,className:"socialMediaShareLink"},o.a.createElement(R.a,{round:!0,className:"socialMediaShareIcon"})),o.a.createElement(j.a,{url:this.state.linkToSharePost,className:"socialMediaShareLink"},o.a.createElement(F.a,{round:!0,className:"socialMediaShareIcon"})),o.a.createElement("br",null),o.a.createElement("textarea",{value:this.state.linkToSharePost,readOnly:!0,style:{display:"none"},id:"linkToSharePost"+this.state.post._id}),o.a.createElement("p",{id:"copiedLinkConfirmationText"+this.state.post._id,style:{display:"none"}},"Copied link to clipboard!",o.a.createElement("br",null))),o.a.createElement("strong",null,this.state.likes," ",this.state.likeOrLikes))}}]),n}(a.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).checkNsfwStatus=function(){if(a.state.post.nsfw){if(!localStorage.getItem("plumUser56010"))return void a.setState({imageSource:"/nsfw_post_not_signed_in.png"});"true"===localStorage.getItem("showNsfw")?"false"===localStorage.getItem("autoShowNsfw")&&a.setState({imageSource:"/nsfw_post_with_nsfw_on_auto_off.png"}):a.setState({imageSource:"/nsfw_post_with_nsfw_off.png"})}else a.setState({imageSource:a.props.post.imageSource})},a.checkDarkMode=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementById("specifiedPostPic"+a.state.post._id),"true"===localStorage.getItem("darkMode")&&(t.style.borderTop="2px solid black",t.style.borderBottom="2px solid black",t.style.background="#525252");case 2:case"end":return e.stop()}}),e)}))),a.checkIfTimeline=function(){var e=document.getElementById("timelineProfileLink"+a.state.post._id);a.props.isTimeline&&(e.style.display="inline")},a.retrieveProfileImage=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/profile/retrieveProfileImage/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:o=e.sent,a.setState({profileImage:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),a.displayNsfwImage=function(){a.state.post.nsfw&&"true"===localStorage.getItem("showNsfw")&&"false"===localStorage.getItem("autoShowNsfw")&&a.setState({imageSource:a.props.post.imageSource})},a.unveilVideo=function(){var e=document.getElementById("video"+a.state.post._id),t=document.getElementById("videoNsfwPic1"+a.state.post._id),n=document.getElementById("videoNsfwPic2"+a.state.post._id),o=document.getElementById("videoNsfwPic3"+a.state.post._id);t.style.display="none",n.style.display="none",o.style.display="none",e.style.display="block"},a.state={profileImage:"",post:a.props.post,imageSource:!localStorage.getItem("plumUser56010")&&a.props.post.nsfw||a.props.post.nsfw&&("false"===localStorage.getItem("showNsfw")||"false"===localStorage.getItem("autoShowNsfw"))?"/nsfw_post_in_grid_with_auto_nsfw_off.png":a.props.post.imageSource},a.retrieveProfileImage(a.props.post.profile),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){if(this.checkIfTimeline(),this.checkDarkMode(),this.checkNsfwStatus(),"true"===localStorage.getItem("darkMode")){document.getElementById("specifiedPostContent"+this.state.post._id).style.background="#515151";var e=document.getElementById("specifiedPostVideo"+this.state.post._id);e.style.background="#515151",e.style.borderTop="2px solid black",e.style.borderBottom="2px solid black"}}},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(c.a.mark((function e(t,n,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.post===t.post){e.next=7;break}return e.next=3,this.setState({post:this.props.post,imageSource:!localStorage.getItem("plumUser56010")&&this.props.post.nsfw||this.props.post.nsfw&&("false"===localStorage.getItem("showNsfw")||"false"===localStorage.getItem("autoShowNsfw"))?"/nsfw_post_in_grid_with_auto_nsfw_off.png":this.props.post.imageSource});case 3:this.retrieveProfileImage(this.props.post.profile),this.checkIfTimeline(),this.checkDarkMode(),this.checkNsfwStatus();case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.props.likedPostsByUser&&!this.props.isAdmin)return o.a.createElement("div",{style:{textAlign:"center"}},"Loading post...");var e=(new Date-new Date(this.state.post.creationDate))/1e3;e/=60;var t,n="";if((e=parseInt(e))<60)n=e+" minutes ago",1===e&&(n=e+" minute ago");else if(e<1440){var a=parseInt(e/60);n=a+" hours ago",1===a&&(n=a+" hour ago")}else if(e<43200){var r=parseInt(e/60/24);n=r+" days ago",1===r&&(n=r+" day ago")}else if(e<518400){var s=parseInt(e/60/24/30);n=s+" months ago",1===s&&(n=s+" month ago")}else{var l=parseInt(e/60/24/30/12);n=l+" years ago",1===l&&(n=l+" year ago")}if(this.state.post.videoLink)if(this.state.post.nsfw){t="https://www.hub.com/embed/"+this.state.post.videoLink.split("viewkey=")[1]}else{var i=this.state.post.videoLink.split("watch?v=")[1];i.includes("&")&&(i=i.split("&")[0]),t="https://www.youtube-nocookie.com/embed/"+i}return o.a.createElement("div",{id:this.state.post.postId},o.a.createElement("div",{id:"timelineProfileLink"+this.state.post._id,style:{display:"none",paddingLeft:"1%"}},o.a.createElement("a",{href:"/profile/"+this.state.post.profile,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5",textDecoration:"none"}:{color:"black",textDecoration:"none"}},o.a.createElement("img",{id:"profilePicturePreview",src:""+this.state.profileImage,alt:"profile"}),"\xa0",o.a.createElement("strong",null,this.state.post.profile))),o.a.createElement("div",{id:"specifiedPostPic"+this.state.post._id,className:"specifiedPostPic",style:this.state.post.title||this.state.post.videoLink?{display:"none"}:{display:"block"}},o.a.createElement("img",{id:"postPic",src:"../build"+this.state.imageSource,alt:"post",onClick:this.displayNsfwImage})),o.a.createElement("div",{id:"specifiedPostContent"+this.state.post._id,className:"specifiedPostContent card",style:this.state.post.title?{display:"block",marginTop:"5px"}:{display:"none"}},o.a.createElement("h4",{className:"card-title",style:{marginLeft:"2%"}},this.state.post.title),o.a.createElement("p",{className:"card-text",style:{marginLeft:"2%"}},this.state.post.content)),o.a.createElement("div",{id:"specifiedPostVideo"+this.state.post._id,className:"specifiedPostVideo",style:this.state.post.videoLink?{display:"block"}:{display:"none"}},o.a.createElement("iframe",{id:"video"+this.state.post._id,className:"videoPost",title:"video",height:"500vh",src:t,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:this.state.post.nsfw&&"false"===localStorage.getItem("autoShowNsfw")||!localStorage.getItem("plumUser56010")?{display:"none"}:{display:"block"}}),o.a.createElement("img",{id:"videoNsfwPic1"+this.state.post._id,className:"videoNsfwPosterPic",src:"/nsfw_post_with_nsfw_off.png",style:this.state.post.nsfw&&"false"===localStorage.getItem("showNsfw")?{display:"block"}:{display:"none"},alt:"nsfw"}),o.a.createElement("img",{id:"videoNsfwPic2"+this.state.post._id,className:"videoNsfwPosterPic",src:"/nsfw_post_with_nsfw_on_auto_off.png",style:this.state.post.nsfw&&"true"===localStorage.getItem("showNsfw")&&"false"===localStorage.getItem("autoShowNsfw")?{display:"block"}:{display:"none"},alt:"nsfw",onClick:this.unveilVideo}),o.a.createElement("img",{id:"videoNsfwPic3"+this.state.post._id,src:"/nsfw_post_not_signed_in.png",className:"videoNsfwPosterPic",style:this.state.post.nsfw&&!localStorage.getItem("plumUser56010")?{display:"block"}:{display:"none"},alt:"nsfw"})),o.a.createElement("div",{id:"specifiedPostInteractiveSection"},o.a.createElement(M,{post:this.state.post,likedPostsByUser:this.props.likedPostsByUser}),o.a.createElement("p",{id:"postDetails"},this.state.post.description,o.a.createElement("br",null),n),o.a.createElement(O,{post:this.state.post,isFromProfile:this.props.isFromProfile,isTimeline:this.props.isTimeline,likedCommentsByUser:this.props.likedCommentsByUser,postId:this.state.post._id})))}}]),n}(a.Component),W=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={posts:a.props.posts},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.props.posts!==e.posts&&this.setState({posts:this.props.posts})}},{key:"render",value:function(){var e=this;return!0===this.props.isTimeline&&this.state.posts.length<1?o.a.createElement("div",{style:{textAlign:"center",margin:"10px"}},o.a.createElement("h5",null,"Welcome to GifShr! ",o.a.createElement("br",null),o.a.createElement("br",null),"Your timeline is currently empty. Follow profiles to see their most recent posts here."),o.a.createElement("br",null),o.a.createElement("h6",{style:{fontWeight:"normal"}},"The menu which can take you to various pages is on the right end at the top of the page. ",o.a.createElement("br",null),o.a.createElement("br",null),"To visit your profile, click on your profile picture in the top right, just to the left of the menu. ",o.a.createElement("br",null),o.a.createElement("br",null),"You can search for profiles using the search bar at the top, in the middle of the page. ",o.a.createElement("br",null),o.a.createElement("br",null),"The app logo on the top left will take you back here to your timeline."),"For more information, visit the ",o.a.createElement(l.Link,{to:"/about"},"about")," or ",o.a.createElement(l.Link,{to:"/faq"},"FAQ")," pages."):this.props.gridLayout?o.a.createElement("div",{id:"postGrid"},o.a.createElement("div",{className:"individualPic"},this.state.posts.map((function(e,t){return o.a.createElement(l.Link,{key:t,to:"/profile/"+e.profile+"/"+e.postId},o.a.createElement("img",{key:t,className:"postGridPic",id:e.postId,src:e.imageSource,alt:"post",style:e.title||e.nsfw&&!localStorage.getItem("plumUser56010")||e.nsfw&&("false"===localStorage.getItem("showNsfw")||"false"===localStorage.getItem("autoShowNsfw"))?{display:"none"}:{display:"inline"}}))})))):o.a.createElement("div",{id:"postScroll"},this.state.posts.map((function(t,n){return o.a.createElement("div",{key:n},o.a.createElement(A,{post:t,key:n,isFromProfile:!0,isTimeline:e.props.isTimeline,likedPostsByUser:e.props.likedPostsByUser,likedCommentsByUser:e.props.likedCommentsByUser}))})))}}]),n}(a.Component),J=n(67),Y=n(68),G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).renderPosts=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,e.next=3,a.setState({posts:[]});case 3:if(!t.includes("profile/")){e.next=27;break}return(n=t.split("profile/")[1]).includes("/")&&(n=n.split("/")[0]),e.next=8,fetch("/posts/renderPosts/"+n,{method:"GET",headers:{"Content-Type":"application/json"}}).catch((function(e){console.log(e)}));case 8:return o=e.sent,e.next=11,o.text();case 11:return r=e.sent,e.next=14,JSON.parse(r);case 14:s=e.sent,l=[],i=0;case 17:if(!(i<s.length)){e.next=23;break}return e.next=20,l.push(s[i]);case 20:i++,e.next=17;break;case 23:return e.next=25,a.setState({posts:l});case 25:e.next=28;break;case 27:a.setState({posts:a.props.likedPostsByUser});case 28:case"end":return e.stop()}}),e)}))),"true"===localStorage.getItem("gridLayout")?a.state={gridLayout:!0,posts:[]}:a.state={gridLayout:!1,posts:[]},a}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){this.props.location.pathname===e.location.pathname&&this.props.likedPostsByUser===e.likedPostsByUser||this.renderPosts()}},{key:"componentDidMount",value:function(){this.renderPosts()}},{key:"handleSwitchToggle",value:function(e){e.target.checked?(this.setState({gridLayout:!0}),localStorage.setItem("gridLayout","true")):(this.setState({gridLayout:!1}),localStorage.setItem("gridLayout","false"))}},{key:"render",value:function(){var e=this,t=window.location.href;return t.includes("profile/")?o.a.createElement("div",null,o.a.createElement(x,{user:localStorage.getItem("plumUser56010"),loggedInUserFollowing:this.props.loggedInUserFollowing,url:t}),o.a.createElement("hr",null),o.a.createElement(J.a,null,o.a.createElement(Y.a,{style:{textAlign:"right",marginTop:"4px"}},"Post Grid"),o.a.createElement(Y.a,null,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"layoutSwitch",type:"checkbox",checked:this.state.gridLayout,onChange:function(t){return e.handleSwitchToggle(t)}}),o.a.createElement("span",{className:"slider round"})))),o.a.createElement(W,{gridLayout:this.state.gridLayout,posts:this.state.posts,likedPostsByUser:this.props.likedPostsByUser,url:t})):o.a.createElement("div",null,o.a.createElement(J.a,null,o.a.createElement(Y.a,{style:{textAlign:"right",marginTop:"4px"}},"Post Grid"),o.a.createElement(Y.a,null,o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"layoutSwitch",type:"checkbox",checked:this.state.gridLayout,onChange:function(t){return e.handleSwitchToggle(t)}}),o.a.createElement("span",{className:"slider round"})))),o.a.createElement(W,{gridLayout:this.state.gridLayout,posts:this.state.posts,likedPostsByUser:this.props.likedPostsByUser,url:t}))}}]),n}(a.Component),H=n(21),V=n(69),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).enableButton=function(){document.getElementById("formSubmitButton").disabled=!1},a.enableButtonCheck=function(){if(null!==a.state.file){var e=document.getElementById("postIsNSFW"),t=document.getElementById("postIsNotNSFW");e.checked||t.checked?document.getElementById("formSubmitButton").disabled=!1:document.getElementById("formSubmitButton").disabled=!0}else document.getElementById("formSubmitButton").disabled=!0},a.nsfwCheckboxAction=function(e){var t=document.getElementById("postIsNSFW"),n=document.getElementById("postIsNotNSFW");t.checked&&n.checked&&("postIsNSFW"===e.target.id?n.checked=!1:t.checked=!1),a.enableButtonCheck()},a.state={file:null,displayPreview:!1},a.handleChange=a.handleChange.bind(Object(H.a)(a)),a.enableButtonCheck=a.enableButtonCheck.bind(Object(H.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){try{var t=document.getElementById("fileUploadInput");if(t.files.item(0).size>1e7)return this.setState({file:null,displayPreview:!1}),document.getElementById("formSubmitButton").disabled=!0,void(document.getElementById("fileSizeError").style.display="inline");document.getElementById("fileSizeError").style.display="none";var n=t.value.split("."),a=n[n.length-1];"png"===a||"jpg"===a||"jpeg"===a||"gif"===a?(this.enableButtonCheck(),document.getElementById("fileTypeError").style.display="none",this.setState({displayPreview:!0,file:URL.createObjectURL(e.target.files[0])})):(this.setState({file:null,displayPreview:!1}),document.getElementById("formSubmitButton").disabled=!0,document.getElementById("fileTypeError").style.display="inline")}catch(o){this.setState({file:null}),document.getElementById("formSubmitButton").disabled=!0}}},{key:"render",value:function(){var e=this.props.description;return o.a.createElement("div",{className:"App",id:"profileEditor"},o.a.createElement(V.a,null,o.a.createElement(J.a,null,o.a.createElement(Y.a,null,o.a.createElement("h4",null,"Edit profile"))),o.a.createElement(J.a,null,o.a.createElement(Y.a,null,"Upload new profile picture")),o.a.createElement(J.a,null,o.a.createElement(Y.a,null,o.a.createElement("form",{action:"/profile/"+localStorage.getItem("plumUser56010")+"/uploadProfileImage",method:"post",encType:"multipart/form-data"},o.a.createElement("br",null),o.a.createElement("input",{name:"profilePic",id:"fileUploadInput",type:"file",onChange:this.handleChange,style:{marginLeft:"10px"}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{id:"tokenInput",className:"form-control",name:"tokenInput",type:"text",value:localStorage.getItem("token"),"aria-label":"TextPostTitle",width:"2px",readOnly:!0,style:{display:"none"}}),o.a.createElement("div",{id:"fileSizeError",style:{color:"red",display:"none"}},"File size is too large. Files cannot exceed 10MB in size.",o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("div",{id:"fileTypeError",style:{color:"red",display:"none"}},"File type not accepted. Only .PNG, .JPG/JPEG, .GIF file extensions allowed.",o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("img",{src:this.state.file,id:"profilePicture",alt:"profile",style:this.state.displayPreview?{display:"inline"}:{display:"none"}}),o.a.createElement("br",null),o.a.createElement("br",null),"Profile description",o.a.createElement("br",null),o.a.createElement("textarea",{name:"profileDescription",id:"profileDescription",rows:"4",cols:"30",defaultValue:e,onChange:this.enableButton}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"postIsNSFW"},"Required: Does this profile picture contain adult content? (NSFW)"),o.a.createElement("br",null),o.a.createElement("input",{type:"checkbox",id:"postIsNSFW",name:"nsfwPostCheckbox",value:"postIsNSFW",onChange:this.nsfwCheckboxAction})," Yes \xa0",o.a.createElement("input",{type:"checkbox",id:"postIsNotNSFW",name:"nsfwPostCheckbox",value:"postIsNotNSFW",onChange:this.nsfwCheckboxAction})," No ",o.a.createElement("br",null),"You can read the guidelines for what classifies as adult/NSFW content ",o.a.createElement("a",{href:"/guidelines#nsfw"},"here.")," ",o.a.createElement("br",null),o.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"formSubmitButton",disabled:!0},"Save"))))))}}]),n}(a.Component),q=(n(58),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).enableButtonCheck=function(){if(null!==a.state.file){var e=document.getElementById("postIsNSFW"),t=document.getElementById("postIsNotNSFW");e.checked||t.checked,document.getElementById("formSubmitButton").disabled=!0}else document.getElementById("formSubmitButton").disabled=!0},a.togglePostType=function(e){var t=e.target,n=document.getElementById("newPostImageButton"),o=document.getElementById("newPostTextButton"),r=document.getElementById("newPostVideoButton");switch(t.id){case"newPostImageButton":n.className="btn btn-primary newPostButton",o.className="btn btn-secondary newPostButton",r.className="btn btn-secondary newPostButton",a.setState({imagePost:!0,textPost:!1,videoPost:!1});break;case"newPostTextButton":n.className="btn btn-secondary newPostButton",o.className="btn btn-primary newPostButton",r.className="btn btn-secondary newPostButton",a.setState({imagePost:!1,textPost:!0,videoPost:!1});break;case"newPostVideoButton":n.className="btn btn-secondary newPostButton",o.className="btn btn-secondary newPostButton",r.className="btn btn-primary newPostButton",a.setState({imagePost:!1,textPost:!1,videoPost:!0});break;case"newPostHubButton":n.className="btn btn-secondary newPostButton",o.className="btn btn-secondary newPostButton",r.className="btn btn-secondary newPostButton",a.setState({imagePost:!1,textPost:!1,videoPost:!1})}a.openPostTypeMenu()},a.submitTextPost=Object(m.a)(c.a.mark((function e(){var t,n,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("textPostTitle"),n=document.getElementById("textPostContent"),a=t.value,o=n.value,!(a.length<1)){e.next=8;break}return document.getElementById("textPostTitleError").style.display="inline",e.abrupt("return");case 8:return e.next=10,fetch("/posts/"+localStorage.getItem("plumUser56010")+"/createTextPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,content:o,token:localStorage.getItem("token")})});case 10:return r=e.sent,e.next=13,r.text();case 13:"error"===e.sent?alert("Unable to publish post. Please try again later."):window.location.replace("/profile/"+localStorage.getItem("plumUser56010"));case 15:case"end":return e.stop()}}),e)}))),a.submitVideoPost=Object(m.a)(c.a.mark((function e(){var t,n,a,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("videoPostDescription"),n=document.getElementById("videoPostURL"),!((a=n.value).length<1)){e.next=7;break}return document.getElementById("videoPostError").style.display="inline",e.abrupt("return");case 7:if(a.startsWith("https://www.youtube.com/watch?v=")){e.next=11;break}return document.getElementById("videoPostError").style.display="inline",e.abrupt("return");case 11:return e.next=13,fetch("/posts/"+localStorage.getItem("plumUser56010")+"/createVideoPost",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoLink:a,description:t.value,token:localStorage.getItem("token")})});case 13:return o=e.sent,e.next=16,o.text();case 16:r=e.sent,console.log(r),"error"===r?alert("Unable to publish post. Please try again later."):window.location.replace("/profile/"+localStorage.getItem("plumUser56010"));case 19:case"end":return e.stop()}}),e)}))),a.nsfwCheckboxAction=function(e){var t=document.getElementById("postIsNSFW"),n=document.getElementById("postIsNotNSFW");t.checked&&n.checked&&("postIsNSFW"===e.target.id?n.checked=!1:t.checked=!1),a.enableButtonCheck()},a.openPostTypeMenu=function(){var e=document.getElementById("choosePostType");"none"===e.style.display?e.style.display="inline":e.style.display="none"},a.state={file:null,readyToPost:!1,imagePost:!0,textPost:!1,videoPost:!1,displayPreview:!1,postIsNSFW:!1,postIsNotNSFW:!1},a.handleChange=a.handleChange.bind(Object(H.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(){var e=Object(m.a)(c.a.mark((function e(t){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.setState({file:URL.createObjectURL(t.target.files[0])});case 3:if(n=document.getElementById("fileUploadInput"),!(n.files.item(0).size>1e7)){e.next=13;break}return e.next=8,this.setState({file:null,displayPreview:!1});case 8:return document.getElementById("formSubmitButton").disabled=!0,document.getElementById("fileSizeError").style.display="inline",e.abrupt("return");case 13:document.getElementById("fileSizeError").style.display="none";case 14:a=n.value.split("."),"png"===(o=a[a.length-1])||"jpg"===o||"jpeg"===o||"gif"===o?(this.enableButtonCheck(),document.getElementById("fileTypeError").style.display="none",this.setState({displayPreview:!0})):(this.setState({file:null,displayPreview:!1}),document.getElementById("formSubmitButton").disabled=!0,document.getElementById("fileTypeError").style.display="inline"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),this.setState({file:null}),document.getElementById("formSubmitButton").disabled=!0;case 24:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return localStorage.getItem("plumUser56010")?o.a.createElement("div",{id:"postUpload"},o.a.createElement("button",{className:"btn btn-info",id:"changePostType",onClick:this.openPostTypeMenu,style:{width:"60%",margin:"auto"}},"Change post type \xa0",o.a.createElement(w.a,{icon:"caret-down"})),o.a.createElement("div",{id:"choosePostType",style:{display:"none"}},o.a.createElement("button",{className:"btn btn-primary newPostButton",id:"newPostImageButton",onClick:this.togglePostType},o.a.createElement(w.a,{icon:["far","image"]})," Image/Gif"),o.a.createElement("button",{className:"btn btn-secondary newPostButton",id:"newPostTextButton",onClick:this.togglePostType},o.a.createElement(w.a,{icon:["fas","align-left"]})," Text"),o.a.createElement("button",{className:"btn btn-secondary newPostButton",id:"newPostVideoButton",onClick:this.togglePostType},o.a.createElement(w.a,{icon:["fab","youtube"]})," YouTube Embed")),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("div",{id:"imageUploadForm",style:this.state.imagePost?{display:"inline"}:{display:"none"}},o.a.createElement("form",{action:"/posts/"+localStorage.getItem("plumUser56010")+"/createImagePost",method:"post",encType:"multipart/form-data"},o.a.createElement("h4",null,o.a.createElement(w.a,{icon:["far","image"]})," Image/Gif "),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"fileUploadInput",className:"btn btn-secondary",style:{width:"200px",margin:"auto"}},"Click to upload image"),o.a.createElement("input",{name:"postPic",id:"fileUploadInput",type:"file",onChange:this.handleChange,style:{marginLeft:"10px",display:"none"}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{id:"tokenInput",className:"form-control",name:"tokenInput",type:"text",value:localStorage.getItem("token"),"aria-label":"TextPostTitle",readOnly:!0,style:{display:"none"}}),o.a.createElement("div",{id:"fileSizeError",style:{color:"red",display:"none"}},"File size is too large. Files cannot exceed 10MB in size.",o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("div",{id:"fileTypeError",style:{color:"red",display:"none"}},"File type not accepted. Only .PNG, .JPG/JPEG, .GIF file extensions allowed.",o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("img",{src:this.state.file,alt:"post",style:this.state.displayPreview?{display:"inline",maxWidth:"90%"}:{display:"none"}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("textarea",{className:"form-control",name:"postDescription",rows:"3",style:{width:"80%",margin:"auto"},placeholder:"Post description..."}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"postIsNSFW"},"Required: Does this post contain adult content? (NSFW)"),o.a.createElement("br",null),o.a.createElement("input",{type:"checkbox",id:"postIsNSFW",name:"nsfwPostCheckbox",value:"postIsNSFW",onChange:this.nsfwCheckboxAction,checked:"true"===localStorage.getItem("autoCheckNsfwOnPosts")})," Yes \xa0",o.a.createElement("input",{type:"checkbox",id:"postIsNotNSFW",name:"nsfwPostCheckbox",value:"postIsNotNSFW",onChange:this.nsfwCheckboxAction})," No ",o.a.createElement("br",null),"You can read the guidelines for what classifies as adult/NSFW content ",o.a.createElement("a",{href:"/guidelines#nsfw"},"here.")," ",o.a.createElement("br",null),o.a.createElement("span",{style:{size:"30px",color:"red"}},"NOTE: Images cannot be posted on this production environment due to storage restrictions on this free server."),o.a.createElement("br",null),o.a.createElement("button",{type:"submit",className:"btn btn-primary",id:"formSubmitButton",disabled:!0},"Post"))),o.a.createElement("div",{id:"textUploadForm",style:this.state.textPost?{display:"inline"}:{display:"none"}},o.a.createElement("h4",null,o.a.createElement(w.a,{icon:["fas","align-left"]})," Text "),o.a.createElement("br",null),"Title (max 120 chars)",o.a.createElement("input",{id:"textPostTitle",className:"form-control",type:"text",placeholder:"Post Title","aria-label":"TextPostTitle",maxLength:"120",style:{width:"80%",margin:"auto",marginTop:"5px"}}),o.a.createElement("div",{id:"textPostTitleError",style:{display:"none"}},"Your post must have a title."),o.a.createElement("br",null),"Content (optional, max 400 chars)",o.a.createElement("br",null),o.a.createElement("textarea",{id:"textPostContent",className:"form-control",name:"textPostContent",style:{width:"80%",height:"200px",margin:"auto"},maxLength:"400",placeholder:"Post text..."}),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",id:"submitTextPost",style:{width:"220px"},onClick:this.submitTextPost},"Post")),o.a.createElement("div",{id:"videoUploadForm",style:this.state.videoPost?{display:"inline"}:{display:"none"}},o.a.createElement("h4",null,o.a.createElement(w.a,{icon:["fab","youtube"]})," YouTube Embed "),o.a.createElement("br",null),"Paste or enter URL of a YouTube video you want to share:",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("input",{id:"videoPostURL",className:"form-control",type:"text",placeholder:"https://www.youtube.com/watch?v=aC7eegwbDwE","aria-label":"VideoPostURL",style:{width:"80%",margin:"auto"}}),o.a.createElement("div",{id:"videoPostError",style:{display:"none",color:"red"}},"You must submit a valid link to a YouTube video."),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("textarea",{name:"videoPostDescription",id:"videoPostDescription",className:"form-control",style:{width:"80%",margin:"auto",height:"100px"},placeholder:"Video description (optional)"}),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-primary",id:"submitVideoPost",style:{width:"220px"},onClick:this.submitVideoPost},"Post"))):o.a.createElement("h2",{style:{textAlign:"center"}},"Sign in to create a post.")}}]),n}(a.Component)),K=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).logOut=function(){localStorage.setItem("plumUser56010",""),localStorage.setItem("darkMode",""),localStorage.setItem("showNsfw",""),localStorage.setItem("autoShowNsfw",""),localStorage.setItem("autoCheckNsfwOnPosts",""),localStorage.setItem("token",""),window.location.reload(!1)},a.toggleMenu=function(){var e=document.getElementById("menuLinks"),t=document.getElementById("menuHamburger");"block"===e.style.display?(e.style.display="none",t.style.color="black"):(e.style.display="block",t.style.color="grey")},a.banCheck=Object(m.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("plumUser56010"),e.next=3,fetch("/report/checkBanStatus/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:"exists"===e.sent&&a.logOut();case 8:case"end":return e.stop()}}),e)}))),localStorage.getItem("profileImage")?a.state={profileImage:localStorage.getItem("profileImage")}:a.state={profileImage:"/default_profile_image.png"},a.banCheck(),a}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(l.Link,{to:"/",id:"loggedInHeaderAppLogo"},o.a.createElement("img",{src:"/GifShrText15.png",style:{marginTop:"20px"},alt:"GifShr"})),o.a.createElement("span",{id:"loggedInHeaderButtons"},o.a.createElement(l.Link,{to:"/profile/"+localStorage.getItem("plumUser56010")},o.a.createElement("img",{id:"headerProfileLink",src:this.state.profileImage,alt:"logo"})),o.a.createElement(w.a,{icon:"bars",id:"menuHamburger",className:"icon",onClick:this.toggleMenu})),o.a.createElement("div",{style:{clear:"both"}}),o.a.createElement("br",null),o.a.createElement("div",{id:"menuLinks",style:{marginBottom:"20px"}},o.a.createElement(l.Link,{to:"/profile/"+localStorage.getItem("plumUser56010"),onClick:this.toggleMenu,className:"abababa",style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:"user",id:"profileIcon"}),"\xa0 My Profile"),o.a.createElement(l.Link,{to:"/createPost",onClick:this.toggleMenu,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:"plus"}),"\xa0 Create New Post"),o.a.createElement(l.Link,{to:"/likedPosts",onClick:this.toggleMenu,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:"thumbs-up"}),"\xa0 Liked Posts"),o.a.createElement(l.Link,{to:"/settings",onClick:this.toggleMenu,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:"cog",id:"settingsIcon"}),"\xa0 Settings"),o.a.createElement("a",{href:"/login",onClick:this.logOut,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement(w.a,{icon:"sign-out-alt",id:"signOutIcon"}),"\xa0 Sign out")))}}]),n}(a.Component),Q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"notLoggedInHeader"},o.a.createElement(l.Link,{to:"/timeline"},o.a.createElement("img",{id:"appLogo",src:"/GifShrText15.png",style:{marginTop:"20px",float:"left"},alt:"GifShr"})),o.a.createElement("span",{id:"notLoggedInHeaderButtons"},o.a.createElement(l.Link,{to:"/login"},o.a.createElement("button",{type:"button",className:"btn btn-outline-dark",id:"headerLoginButton",width:"400px"},"Log in")),o.a.createElement(l.Link,{to:"/accountCreation"},o.a.createElement("button",{type:"button",className:"btn btn-outline-dark",id:"signUpButton",width:"400px"},"Sign up"))),o.a.createElement("div",{style:{clear:"both"}}),o.a.createElement("br",null))}}]),n}(a.Component),$=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return localStorage.getItem("plumUser56010")?o.a.createElement(K,null):o.a.createElement(Q,null)}}]),n}(a.Component),X=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).props.isProfilePicNsfw&&"true"!==localStorage.getItem("autoShowNsfw")?a.state={username:a.props.username,profileImage:"/nsfw_post_in_grid_with_auto_nsfw_off.png",description:a.props.description,isComment:a.props.isComment}:a.state={username:a.props.username,profileImage:a.props.profileImage,description:a.props.description,isComment:a.props.isComment},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.description;return e&&!this.state.isComment&&e.length>40&&(e=e.substring(0,40)+"..."),o.a.createElement("div",{className:"media",id:"profilePreview"},o.a.createElement("img",{id:"searchResultPic",src:this.state.profileImage,className:"mr-3",alt:"profile"}),o.a.createElement("div",{className:"media-body",id:"profilePreviewDetails"},o.a.createElement("h6",{className:"mt-0 mb-0",id:"profilePreviewName"},this.state.username),e))}}]),n}(a.Component),Z=(n(59),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).checkDarkMode=function(){if("true"===localStorage.getItem("darkMode")){var e=document.getElementById("searchBar"),t=document.getElementById("searchResults");e.style.backgroundColor="#999999",t.style.backgroundColor="#999999"}},a.pageClick=function(){var e=Object(m.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"profilePreviewName"!==(n=t.target||t.srcElement).id&&"profilePreviewDetails"!==n.id&&"searchResultPic"!==n.id&&"searchBar"!==n.id&&"profilePreview"!==n.id&&(a.setState({noUsers:!1,currentlyLoadingSearch:!1,usersResult:[]}),a.toggleResult());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.toggleResult=function(){var e=document.getElementById("searchResults"),t=document.getElementById("searchResultsNone"),n=document.getElementById("currentlyLoading");a.state.currentlyLoadingSearch?(e.style.display="none",t.style.display="none",n.style.display="block"):a.state.noUsers?(e.style.display="none",t.style.display="block",n.style.display="none"):a.state.usersResult.length>0?(e.style.display="block",t.style.display="none",n.style.display="none"):(e.style.display="none",t.style.display="none",n.style.display="none")},a.searchUsers=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,o,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value,/^\w+$/.test(n)){e.next=6;break}a.setState({noUsers:!0,currentlyLoadingSearch:!1,usersResult:[]}),e.next=22;break;case 6:if(window.addEventListener("mousedown",a.pageClick,!1),o=t.target.value,a.setState({user:o,currentlyLoadingSearch:!0,noUsers:!1,usersResult:[]}),!(o.length>0)){e.next=20;break}return e.next=12,fetch("/profile/searchUsers/"+o).catch((function(e){console.log(e)}));case 12:return r=e.sent,e.next=15,r.text();case 15:s=e.sent,(l=JSON.parse(s)).length<1?a.setState({noUsers:!0,currentlyLoadingSearch:!1,usersResult:[]}):a.setState({noUsers:!1,currentlyLoadingSearch:!1,usersResult:l}),e.next=21;break;case 20:a.setState({currentlyLoadingSearch:!1,noUsers:!1,usersResult:[]});case 21:a.toggleResult();case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.clickedSearchResultProfile=function(){a.setState({noUsers:!1,currentlyLoadingSearch:!1,usersResult:[]}),a.toggleResult()},a.state={user:"",noUsers:!1,currentlyLoadingSearch:!1,usersResult:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkDarkMode()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("input",{id:"searchBar",className:"form-control",type:"search",placeholder:"Search Users","aria-label":"Search",onChange:function(t){return e.searchUsers(t)}}),o.a.createElement("div",{id:"searchResults"},this.state.usersResult.map((function(t,n){return o.a.createElement(l.Link,{id:"searchProfileResultLink",key:n,to:"/profile/"+t.username,onClick:e.clickedSearchResultProfile,style:{color:"black"}},o.a.createElement(X,{username:t.username,profileImage:t.profileImage,description:t.description,isProfilePicNsfw:t.profilePicNsfw,key:n}))}))),o.a.createElement("div",{id:"searchResultsNone"},"No users found."),o.a.createElement("div",{id:"currentlyLoading"},"Loading..."))}}]),n}(a.Component)),ee=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).retrievePost=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s,l,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href,n=t.split("profile/")[1],o=n.split("/")[0],r=n.split("/")[1],e.next=6,fetch("/posts/"+o+"/"+r);case 6:return s=e.sent,e.next=9,s.text();case 9:l=e.sent,"profile does not exist.","profile does not exist."===l?a.setState({profileExists:!1}):(i=JSON.parse(l),a.setState({post:i,user:o,postId:r}),a.retrieveProfileImage(o));case 12:case"end":return e.stop()}}),e)}))),a.retrieveProfileImage=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/profile/retrieveProfileImage/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:o=e.sent,a.setState({profileImage:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),a.state={post:null,profileExists:!0,user:"",postId:0,profileImage:"",marginLeft:20},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.retrievePost().catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.post?o.a.createElement("div",{id:"singlePost"},o.a.createElement("div",{id:"individualPostHeader"},o.a.createElement(C.HashLink,{to:"/profile/"+this.state.user+"#"+this.state.postId.split("#")[0]},o.a.createElement(w.a,{icon:"arrow-left",id:"individualPostBackArrow",style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("a",{href:"/profile/"+this.state.post.profile,style:"true"===localStorage.getItem("darkMode")?{color:"#b5b5b5"}:{color:"black"}},o.a.createElement("img",{id:"profilePicturePreview",src:""+this.state.profileImage,alt:"profile"}),"\xa0",o.a.createElement("strong",null,this.state.user))),o.a.createElement(A,{post:this.state.post,isFromProfile:!1,likedPostsByUser:this.props.likedPostsByUser,likedCommentsByUser:this.props.likedCommentsByUser})):this.state.profileExists?"post does not exist.":"profile does not exist."}}]),n}(a.Component),te=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).scrollToTop=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},e}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{id:"footer"},o.a.createElement("span",{id:"footerLogo"},o.a.createElement("img",{width:"40",src:"/GifShrLogo.png",alt:"logo"})),"\u2003",o.a.createElement("span",{id:"footerLinkColumn"},o.a.createElement(l.Link,{to:"/about",style:"true"===localStorage.getItem("darkMode")?{color:"white"}:{color:"black"},onClick:this.scrollToTop},"About"),"\xa0|\xa0",o.a.createElement(l.Link,{to:"/faq",style:"true"===localStorage.getItem("darkMode")?{color:"white"}:{color:"black"},onClick:this.scrollToTop},"FAQ"),"\xa0|\xa0",o.a.createElement(l.Link,{to:"/support",style:"true"===localStorage.getItem("darkMode")?{color:"white"}:{color:"black"},onClick:this.scrollToTop},"Support")),o.a.createElement("br",null),o.a.createElement("div",{style:{textAlign:"center"}},"GifShr \xa9 2020. All rights reserved."))}}]),n}(a.Component),ne=["Inappropriate content involving minor(s)","Content containing abusive, harmful or illegal behavior","Offensive language i.e. threats, obscene racism","Inappropriate/sexual content (missing NSFW tag)","Spam, scamming or phishing"],ae=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).renderReports=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("plumUser56010"),e.next=3,fetch("/admin/a8b010/"+t);case 3:return n=e.sent,e.next=6,n.text();case 6:if("You are not an admin."===(o=e.sent)){e.next=12;break}return e.next=10,JSON.parse(o);case 10:r=e.sent,a.setState({reports:r});case 12:case"end":return e.stop()}}),e)}))),a.retrievePostOrCommentInQuestion=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,o,r,s,l,i,m,p,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=parseInt(t.target.id.split("viewPostButton")[1]),!(o=a.state.reports[n]).postId){e.next=19;break}return e.next=5,fetch("/posts/retrievePostById/"+o.postId);case 5:return r=e.sent,e.next=8,r.text();case 8:return s=e.sent,e.next=11,JSON.parse(s);case 11:l=e.sent,a.setState({parsedBody:l}),(i=document.getElementById("viewPost"+n)).style.display="inline",m=l.postId,i.innerHTML='&emsp;<a href="/profile/'+l.profile+"/"+m+'" target="_blank">Link to Post</a>',e.next=32;break;case 19:if(!o.commentId){e.next=32;break}return e.next=22,fetch("/comments/retrieveCommentById/"+o.commentId);case 22:return p=e.sent,e.next=25,p.text();case 25:return u=e.sent,e.next=28,JSON.parse(u);case 28:d=e.sent,a.setState({parsedBody:d}),document.getElementById("viewComment"+n).innerHTML="<br />comment text below: <br />"+d.content;case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.guiltyVerdict=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,a,o,r,s,l,i,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.id.split("guiltyButton")[1],a=document.getElementById("verdictRule1"+n),o=document.getElementById("verdictRule2"+n),r=document.getElementById("verdictRule3"+n),s=document.getElementById("verdictRule4"+n),l=document.getElementById("verdictRule5"+n),!(a.checked||o.checked||r.checked||s.checked||l.checked)){e.next=15;break}return i=document.getElementById("innocentButton"+n),m=t.target,i.disabled=!0,m.disabled=!0,e.next=13,fetch("/report/guiltyVerdict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:n,rule1Broken:a.checked,rule2Broken:o.checked,rule3Broken:r.checked,rule4Broken:s.checked,rule5Broken:l.checked})});case 13:e.next=16;break;case 15:alert("You must select at least 1 rule the user is guilty of");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.innocentVerdict=function(){var e=Object(m.a)(c.a.mark((function e(t){var n,a,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.id.split("innocentButton")[1],a=t.target,o=document.getElementById("guiltyButton"+n),a.disabled=!0,o.disabled=!0,e.next=7,fetch("/report/innocentVerdict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:n})});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={reports:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.renderReports()}},{key:"render",value:function(){var e=this;return this.state.reports?o.a.createElement("div",{style:{marginLeft:"10%"}},this.state.reports.map((function(t,n){return o.a.createElement("div",{key:n,style:{marginBottom:"60px"}},"Defendant: ",o.a.createElement("a",{href:"/profile/"+t.defendant,target:"_blank",rel:"noopener noreferrer"},t.defendant)," ",o.a.createElement("br",null),"Rules broken:",t.rulesReported.map((function(e,t){return o.a.createElement("ul",{key:t},o.a.createElement("div",{key:t},o.a.createElement("li",null,ne[e-1])))})),o.a.createElement("br",null),o.a.createElement("button",{id:"viewPostButton"+n,onClick:e.retrievePostOrCommentInQuestion,style:t.postId||t.commentId?{display:"inline"}:{display:"none"}},"View post or comment"),o.a.createElement("div",{id:"viewPost"+n,style:{display:"hidden"}}),o.a.createElement("div",{id:"viewComment"+n}),o.a.createElement("br",null),"If Guilty, which rules were indeed broken?",o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"verdictRule1"+t._id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"verdictRule1"+t._id,style:{marginTop:"4px"}},"Inappropriate content involving minor(s)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"verdictRule2"+t._id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"verdictRule2"+t._id,style:{marginTop:"4px"}},"Content containing abusive, harmful or illegal behavior")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"verdictRule3"+t._id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"verdictRule3"+t._id,style:{marginTop:"4px"}},"Offensive language i.e. threats, obscene racism")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"verdictRule4"+t._id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"verdictRule4"+t._id,style:{marginTop:"4px"}},"Inappropriate/sexual content (missing NSFW tag)")),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",value:"",id:"verdictRule5"+t._id}),o.a.createElement("label",{className:"form-check-label",htmlFor:"verdictRule5"+t._id,style:{marginTop:"4px"}},"Spam, scamming or phishing")),o.a.createElement("br",null),o.a.createElement("button",{type:"button",className:"btn btn-danger",id:"guiltyButton"+t._id,onClick:e.guiltyVerdict,style:{width:"10%",margin:"5px"}},"Guilty"),o.a.createElement("button",{type:"button",className:"btn btn-success",id:"innocentButton"+t._id,onClick:e.innocentVerdict,style:{width:"10%",margin:"5px"}},"Innocent"))}))):o.a.createElement("div",null,"Loading reports...")}}]),n}(a.Component),oe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleSwitchToggle=function(e){e.target.checked?a.setState({globalTimeline:!0}):a.setState({globalTimeline:!1})},localStorage.getItem("plumUser56010")?a.state={globalTimeline:!1}:a.state={globalTimeline:!0},a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{id:"timeline"},o.a.createElement("div",{style:localStorage.getItem("plumUser56010")?{textAlign:"center"}:{display:"none"}},o.a.createElement(w.a,{icon:"globe"})," View Trending Posts  \u2003",o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"layoutSwitch",type:"checkbox",checked:this.state.globalTimeline,onChange:function(t){return e.handleSwitchToggle(t)}}),o.a.createElement("span",{className:"slider round"}))),o.a.createElement("h4",{style:localStorage.getItem("plumUser56010")?{display:"none"}:{textAlign:"center"}},"Trending Worldwide"),o.a.createElement(W,{gridLayout:!1,posts:this.state.globalTimeline?this.props.globalTimelinePosts:this.props.timelinePosts,likedPostsByUser:this.props.likedPostsByUser,likedCommentsByUser:this.props.likedCommentsByUser,isTimeline:!0,url:window.location.href}))}}]),n}(a.Component),re=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleSettingToggle=function(e){var t=document.getElementsByTagName("BODY")[0],n=e.target.checked;switch(e.target.name){case"darkModeSwitch":n?(a.setState({darkMode:!0,statusText:""}),t.style.color="#b5b5b5",t.style.backgroundColor="#423f3f"):(a.setState({darkMode:!1,statusText:""}),t.style.color="black",t.style.backgroundColor="#fafdff");break;case"showNsfwSwitch":n?a.setState({showNsfw:!0,statusText:""}):a.setState({showNsfw:!1,autoShowNsfw:!1,statusText:""});break;case"autoShowNsfwSwitch":n?a.setState({autoShowNsfw:!0,showNsfw:!0,statusText:""}):a.setState({autoShowNsfw:!1,statusText:""});break;case"autoCheckNsfwOnPosts":n?a.setState({autoCheckNsfwOnPosts:!0,statusText:""}):a.setState({autoCheckNsfwOnPosts:!1,statusText:""})}},a.saveChanges=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({saveButtonText:"Saving...",statusText:""}),localStorage.setItem("darkMode",a.state.darkMode),localStorage.setItem("showNsfw",a.state.showNsfw),localStorage.setItem("autoShowNsfw",a.state.autoShowNsfw),localStorage.setItem("autoCheckNsfwOnPosts",a.state.autoCheckNsfwOnPosts),e.next=7,fetch("/profile/updatePreferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:localStorage.getItem("plumUser56010"),darkMode:a.state.darkMode,showNsfw:a.state.showNsfw,autoShowNsfw:a.state.autoShowNsfw,autoCheckNsfwOnPosts:a.state.autoCheckNsfwOnPosts,token:localStorage.getItem("token")})});case 7:return t=e.sent,e.next=10,t.text();case 10:"success"===e.sent?a.setState({saveButtonText:"Save changes",statusText:"Changes saved."}):a.setState({saveButtonText:"Save changes",statusText:"Failed to save changes."});case 12:case"end":return e.stop()}}),e)}))),a.state={saveButtonText:"Save changes",statusText:"",darkMode:!1,showNsfw:!1,autoShowNsfw:!1,autoCheckNsfwOnPosts:!1},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){"true"===localStorage.getItem("darkMode")&&this.setState({darkMode:!0}),"true"===localStorage.getItem("showNsfw")&&this.setState({showNsfw:!0}),"true"===localStorage.getItem("autoShowNsfw")&&this.setState({autoShowNsfw:!0}),"true"===localStorage.getItem("autoCheckNsfwOnPosts")&&this.setState({autoCheckNsfwOnPosts:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:{marginLeft:"5%"}},o.a.createElement("h2",null,"Settings"),o.a.createElement("div",{id:"settingsMenu",style:{paddingTop:"20px"}},o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"darkModeSwitch",type:"checkbox",checked:this.state.darkMode,onChange:function(t){return e.handleSettingToggle(t)}}),o.a.createElement("span",{className:"slider round"}))," \xa0 Night Mode",o.a.createElement("br",null),o.a.createElement("br",null),"NSFW Settings",o.a.createElement("br",null),"By enabling NSFW content, you agree that you are at least 18 years of age.",o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"showNsfwSwitch",type:"checkbox",checked:this.state.showNsfw,onChange:function(t){return e.handleSettingToggle(t)}}),o.a.createElement("span",{className:"slider round"}))," \xa0 Enable NSFW posts",o.a.createElement("br",null),o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"autoShowNsfwSwitch",type:"checkbox",checked:this.state.autoShowNsfw,onChange:function(t){return e.handleSettingToggle(t)}}),o.a.createElement("span",{className:"slider round"}))," \xa0 Auto-show NSFW posts",o.a.createElement("br",null),o.a.createElement("label",{className:"switch"},o.a.createElement("input",{name:"autoCheckNsfwOnPosts",type:"checkbox",checked:this.state.autoCheckNsfwOnPosts,onChange:function(t){return e.handleSettingToggle(t)}}),o.a.createElement("span",{className:"slider round"}))," \xa0 Mark my posts NSFW by default",o.a.createElement("br",null)),o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.saveChanges,style:{width:"200px"}},this.state.saveButtonText),o.a.createElement("br",null)," ",this.state.statusText)}}]),n}(a.Component),se=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{marginLeft:"10%",marginRight:"10%"}},o.a.createElement("h2",{style:{textAlign:"center"}},"About GifShr"),o.a.createElement("p",null,"\u2003 GifShr (pronounced Gif-Share) is currently a web-browser only social media platform which allows users to post, like, share, and comment on various forms of content. We offer a human team dedicated to preventing spam, toxicity, and unlawful activity from existing on the platform.",o.a.createElement("br",null),o.a.createElement("br",null),"\u2003 GifSh(a)r(e) sprouted from the idea that social media users should be able to monetize their content directly through the app, rather than having to go through sponsors. This has transformed into more than just monetization, as we also want to provide an app that prioritizes free speech and doesn't collect user's personal data. In the near future, we hope to achieve our goal of providing users with a way to earn ad revenue from their pages."),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h2",{style:{textAlign:"center"}},"Mission Statement:"),o.a.createElement("p",null,"\u2003 This platform was created with three main goals at the forefront.",o.a.createElement("br",null),o.a.createElement("br",null),"\u2003 First, we want privacy for users. This starts with no phone number to sign up, and goes beyond. Our platform promises not to sell, share or use any of your information, photos, or posts in any manner whatsoever aside from what you see on this platform."),o.a.createElement("p",null,"\u2003 Second, we want a platform with freedom of speech at the forefront. This means no stifling algorithms to hide posts which deserve attention, no shadow banning, no quarantining of posts/users. This doesn't mean an absolute free-for-all, as anything posted must still abide by the ",o.a.createElement("a",{href:"/guidelines"},"guidelines.")),o.a.createElement("p",null,"\u2003 Third, we want to provide content creators with another form of monetization. A lot of social media sites have advertisements, with corporations taking all of the revenue from the ads. These corporations give none of this revenue to the users' whose content is what brings people to the platform in the first place. While there are currently no ads on the site, running this platform costs money and that price only goes up with more users. In the future, we are going to crunch the numbers and figure out how to move forward with providing monetization for users without losing money as a business. Our goal is to have at least 50% of ad revenue go to users. Stay tuned for more information in the future."),o.a.createElement("p",null,"Thank You for either joining or considering joining GifShr,",o.a.createElement("br",null),o.a.createElement("br",null),"The GifShr Team"))}}]),n}(a.Component),le=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{marginLeft:"10%",marginRight:"10%"}},o.a.createElement("h2",{style:{textAlign:"center"}},"Frequently Asked Questions"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h4",null,"Are there any rules for what I can post?"),o.a.createElement("p",null,"Posts and comments must follow the rules listed on the ",o.a.createElement("a",{href:"/guidelines"},"guidelines page.")),o.a.createElement("br",null),o.a.createElement("h4",null,"Will there be a mobile app released for Android and iOS?"),o.a.createElement("p",null,"As of now, no. Currently, policies for uploading an app to the Google Play store and iOS Store do not allow for NSFW content. However, we are actively looking into this matter and may launch mobile apps in the future."),o.a.createElement("br",null),o.a.createElement("h4",null,"Will I be able to monetize my posts (get paid a portion of ad revenue)?"),o.a.createElement("p",null,"While there are currently ads on the site, running this platform costs money and that price only goes up with more users. We are crunching the numbers and going to figure out how to move forward with providing monetization for users without losing money as a business. Our goal is to have at least 50% of ad revenue go to users. Stay tuned for more information in the future."),o.a.createElement("br",null),o.a.createElement("h4",null,"Can I report people who break rules?"),o.a.createElement("p",null,"Yes, you can report a post, comment, or a profile which is breaking one of the rules listed on our ",o.a.createElement("a",{href:"/guidelines"},"guidelines.")," All reports are reviewed by a human."),o.a.createElement("br",null),o.a.createElement("h4",null,"What is the punishment for breaking the rules?"),o.a.createElement("p",null,"Users who break a rule will receive a ban and have the offending post or comment removed. Ban durations vary based on the severity of the rule(s) broken."),o.a.createElement("br",null),o.a.createElement("h4",null,"How do I get to the Settings page?"),o.a.createElement("p",null,"You can view your Settings page by clicking on the menu (the 3 horizontal lines) in the top right and then clicking Settings in the menu that pops up."),o.a.createElement("br",null),o.a.createElement("h4",null,"How can I view NSFW posts?"),o.a.createElement("p",null,"First, you must be signed in. Then, on the ",o.a.createElement("a",{href:"/settings"},"Settings page"),', enable the "Show NSFW posts" switch. If you want to automatically see posts without clicking them, as well as see NSFW posts in Post Grids, enable the "Auto-show NSFW posts" option. Remember to click \'Save changes\' at the bottom before navigating away from Settings.'),o.a.createElement("br",null),o.a.createElement("h4",null,"How can I view NSFW posts automatically without clicking?"),o.a.createElement("p",null,"While being signed in, go to the ",o.a.createElement("a",{href:"/settings"},"Settings page"),", enable the \"Auto-show NSFW posts\" option. Remember to click 'Save changes' at the bottom before navigating away from Settings."),o.a.createElement("br",null),o.a.createElement("h4",null,"NSFW posts are not appearing in the post grid. How do I make NSFW posts appear in post grid(s)?"),o.a.createElement("p",null,"While being signed in, on the ",o.a.createElement("a",{href:"/settings"},"Settings page"),", enable the \"Auto-show NSFW posts\" option. Remember to click 'Save changes' at the bottom before navigating away from Settings. This is the only way to get NSFW posts to show up on Post Grid views."),o.a.createElement("br",null),o.a.createElement("h4",null,"What is considered to be, or classifies as NSFW content?"),o.a.createElement("p",null,"NSFW content contains one or more of the following:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Nudity i.e. exposure of 'private parts' in image "),o.a.createElement("li",null,"Sexually suggestive content "),o.a.createElement("li",null,"Pornography")),o.a.createElement("br",null),o.a.createElement("h4",null,"Is there a dark / night mode for the site?"),o.a.createElement("p",null,"Yes, visit the ",o.a.createElement("a",{href:"/settings"},"Settings page"),' and enable the "Night Mode" option. Remember to click Save changes.'),o.a.createElement("br",null),o.a.createElement("h4",null,"Where are text posts in the post grid?"),o.a.createElement("p",null,"It was a design decision to not put text posts in the Post Grid view, as there was no good looking way to implement them."),o.a.createElement("br",null),o.a.createElement("h4",null,"How can I post NSFW content?"),o.a.createElement("p",null,"To post an NSFW image or gif, you must select the 'yes' checkbox when asked if your post is NSFW on the creation page."),o.a.createElement("br",null),o.a.createElement("h4",null,"What is Post Grid?"),o.a.createElement("p",null,"Post Grid is a setting which determines the layout of posts you see on a profile, or on your 'liked posts' page. Activating Post Grid will put images in a 3-image-wide grid; each image contains a link to their respective post when clicked. Deactivating Post Grid will set these posts to be in a 'timeline' kind of view, with all info for each post displayed."),o.a.createElement("br",null),o.a.createElement("h4",null,"What if someone is posting content that belongs to me (copyright infringement), or impersonating me?"),o.a.createElement("p",null,"Contact support at copyright@gifshr.com with the content being stolen and we will get back to you to resolve the issue."),o.a.createElement("br",null))}}]),n}(a.Component),ie=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h2",{style:{textAlign:"center"}},"Support"),o.a.createElement("p",{style:{width:"80%",margin:"auto"}},"If you have any questions, concerns, feedback, suggestions, or you would like to report a problem, please contact us at: \xa0",o.a.createElement("a",{href:"mailto:ajaxclounst@gmail.com",style:"true"===localStorage.getItem("darkMode")?{color:"white"}:{}},"ajaxclounst@gmail.com")))}}]),n}(a.Component),ce=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{marginLeft:"10%",marginRight:"10%"}},o.a.createElement("h2",{style:{textAlign:"center"}},"Guidelines"),o.a.createElement("p",null,"Although full freedom and autonomy is ideal, it's not possible on a social media platform due to toxic, immoral, or illegal behavior. Here are some guidelines for what kind of content will not be tolerated on this platform.",o.a.createElement("br",null),o.a.createElement("br",null),"The following kinds of content will result in your account being banned, with varying severity:"),o.a.createElement("ul",null,o.a.createElement("li",null,"Inappropriate content involving minor(s)"),o.a.createElement("li",null,"Content containing abusive, harmful or illegal behavior"),o.a.createElement("li",null,"Offensive language i.e. threats, obscene racism"),o.a.createElement("li",null,"Inappropriate/sexual content (doesn't apply to NSFW posts - only applies on a post which wasn't indicated to be NSFW upon creation)"),o.a.createElement("li",null,"Spam, scamming or phishing")),o.a.createElement("br",null),"NSFW content contains one or more of the following, and is allowed as long as you mark your post as NSFW:",o.a.createElement("ul",null,o.a.createElement("li",null,"Nudity i.e. exposure of 'private parts' in image "),o.a.createElement("li",null,"Sexually suggestive content "),o.a.createElement("li",null,"Pornography")))}}]),n}(a.Component),me=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).sendRecoveryCode=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=document.getElementById("emailInput").value)){e.next=6;break}return document.getElementById("emailEmptyError").style.display="inline",e.abrupt("return");case 6:document.getElementById("emailEmptyError").style.display="none";case 7:return e.next=9,fetch("/profile/requestRecoveryCode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});case 9:return n=e.sent,e.next=12,n.text();case 12:"does not exist"===(o=e.sent)?document.getElementById("emailDoesNotExistError").style.display="inline":"sent"===o?(document.getElementById("emailDoesNotExistError").style.display="none",document.getElementById("emailEmptyError").style.display="none",document.getElementById("recoverySentRecently").style.display="none",a.setState({emailSentTo:t}),document.getElementById("passwordRecoveryForm").style.display="none",document.getElementById("recoveryCodeForm").style.display="inline"):"please wait"===o&&(document.getElementById("recoverySentRecently").style.display="inline");case 14:case"end":return e.stop()}}),e)}))),a.setNewPassword=Object(m.a)(c.a.mark((function e(){var t,n,o,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("recoveryCodeInput").value,n=document.getElementById("newPasswordInput").value,o=document.getElementById("repeatNewPasswordInput").value,t){e.next=8;break}return document.getElementById("recoveryCodeError").style.display="inline",e.abrupt("return");case 8:document.getElementById("recoveryCodeError").style.display="none";case 9:if(!(n.length<5)){e.next=14;break}return document.getElementById("newPasswordLengthError").style.display="inline",e.abrupt("return");case 14:document.getElementById("newPasswordLengthError").style.display="none";case 15:if(n===o){e.next=20;break}return document.getElementById("newPasswordsDoNotMatchError").style.display="inline",e.abrupt("return");case 20:document.getElementById("newPasswordsDoNotMatchError").style.display="none";case 21:return e.next=23,fetch("/profile/requestPasswordReset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recoveryCode:t,email:a.state.emailSentTo,newPassword:n})});case 23:return r=e.sent,e.next=26,r.text();case 26:"incorrect recovery code"===(s=e.sent)?document.getElementById("incorrectRecoveryCodeError").style.display="inline":"error"!==s&&(document.getElementById("recoveryCodeForm").style.display="none",document.getElementById("resetSuccessful").style.display="inline");case 28:case"end":return e.stop()}}),e)}))),a.state={responseToRequest:"",emailSentTo:""},a}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{width:"80%",textAlign:"center",margin:"auto",paddingTop:"40px"}},o.a.createElement("h3",null,"Password Recovery"),o.a.createElement("div",{id:"passwordRecoveryForm"},"Enter email associated with your account:",o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"email",className:"form-control",id:"emailInput",placeholder:"Email"})),o.a.createElement("div",{id:"emailEmptyError",style:{color:"red",display:"none"}},"Email cannot be empty.",o.a.createElement("br",null)),o.a.createElement("div",{id:"recoverySentRecently",style:{color:"red",display:"none"}},"There was recently a recovery request for this account. You must wait 5 minutes before requesting another recovery code.",o.a.createElement("br",null)),o.a.createElement("div",{id:"emailDoesNotExistError",style:{color:"red",display:"none"}},"There is no account associated with this email.",o.a.createElement("br",null)),o.a.createElement("button",{type:"submit",className:"btn btn-primary",style:{width:"200px"},onClick:this.sendRecoveryCode},"Send Code")),o.a.createElement("div",{id:"recoveryCodeForm",style:{display:"none"}},o.a.createElement("br",null),"Enter 8-digit code sent to your email.",o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"number",className:"form-control",id:"recoveryCodeInput",placeholder:"8-digit code"})),o.a.createElement("div",{id:"recoveryCodeError",style:{color:"red",display:"none"}},o.a.createElement("br",null),"You must enter the recovery code sent to your email. ",o.a.createElement("br",null),"Not getting an email? Check your spam folder or try again.",o.a.createElement("br",null)),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",minLength:"5",maxLength:"30",id:"newPasswordInput",placeholder:"New password"})),o.a.createElement("div",{id:"newPasswordLengthError",style:{color:"red",display:"none"}},"Your password must be between 5 and 30 characters.",o.a.createElement("br",null)),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"password",className:"form-control",minLength:"5",maxLength:"30",id:"repeatNewPasswordInput",placeholder:"Repeat new password"})),o.a.createElement("div",{id:"newPasswordsDoNotMatchError",style:{color:"red",display:"none"}},"Your new password entries do not match.",o.a.createElement("br",null)),o.a.createElement("div",{id:"incorrectRecoveryCodeError",style:{color:"red",display:"none"}},"Incorrect recovery code entered. You must get a new recovery code.",o.a.createElement("br",null)),o.a.createElement("button",{type:"submit",className:"btn btn-success",style:{width:"200px"},onClick:this.setNewPassword},"Set new password")),o.a.createElement("div",{id:"resetSuccessful",style:{display:"none"}},o.a.createElement("br",null),"Your password has been successfully reset. ",o.a.createElement("a",{href:"/login"},"Log in."),o.a.createElement("br",null)))}}]),n}(a.Component),pe=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return o.a.createElement("div",{style:{width:"50%",margin:"auto"}},o.a.createElement("h3",null,"Article Creator"),"Coming soon")}}]),n}(a.Component),ue=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).checkDarkMode=Object(m.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=document.getElementsByTagName("BODY")[0],"true"===localStorage.getItem("darkMode")&&(t.style.color="#b5b5b5",t.style.backgroundColor="#423f3f");case 2:case"end":return e.stop()}}),e)}))),a.retrieveLikedPostsByUser=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("plumUser56010"))){e.next=15;break}return e.next=4,fetch("/posts/likedPosts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,token:localStorage.getItem("token")})}).catch((function(e){return console.log(e)}));case 4:return n=e.sent,e.next=7,n.text();case 7:if("error"!==(o=e.sent)){e.next=11;break}return alert("Error occurred retrieving liked posts."),e.abrupt("return");case 11:return e.next=13,JSON.parse(o);case 13:r=e.sent,a.setState({likedPostsByUser:r});case 15:case"end":return e.stop()}}),e)}))),a.retrieveLikedCommentsByUser=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("plumUser56010"))){e.next=12;break}return e.next=4,fetch("/comments/"+t+"/likedComments");case 4:return n=e.sent,e.next=7,n.text();case 7:return o=e.sent,e.next=10,JSON.parse(o);case 10:r=e.sent,a.setState({likedCommentsByUser:r});case 12:case"end":return e.stop()}}),e)}))),a.retrieveUserInfo=Object(m.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("plumUser56010"))){e.next=9;break}return e.next=4,fetch("/profile/retrieveProfileInfo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:t,token:localStorage.getItem("token")})});case 4:return n=e.sent,e.next=7,n.text();case 7:"profile not found."!==(o=e.sent)&&"error"!==o&&(r=JSON.parse(o),a.setState({loggedInUserFollowing:r.following,profileDescription:r.description}));case 9:case"end":return e.stop()}}),e)}))),a.retrieveTimelinePosts=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("plumUser56010")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/posts/timelinePosts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:localStorage.getItem("plumUser56010"),token:localStorage.getItem("token")})});case 4:return t=e.sent,e.next=7,t.text();case 7:"error"!==(n=e.sent)&&(o=JSON.parse(n),a.setState({timelinePosts:o}));case 9:case"end":return e.stop()}}),e)}))),a.retrieveGlobalTimelinePosts=Object(m.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/globalTimelinePosts");case 2:return t=e.sent,e.next=5,t.text();case 5:"error"!==(n=e.sent)&&(o=JSON.parse(n),a.setState({globalTimelinePosts:o}));case 7:case"end":return e.stop()}}),e)}))),a.retrieveProfileImage=Object(m.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("plumUser56010")){e.next=8;break}return e.next=3,fetch("/profile/retrieveProfileImage/"+localStorage.getItem("plumUser56010"));case 3:return t=e.sent,e.next=6,t.text();case 6:n=e.sent,localStorage.setItem("profileImage",n);case 8:case"end":return e.stop()}}),e)}))),a.state={likedPostsByUser:[],likedCommentsByUser:[],loggedInUserFollowing:[],timelinePosts:[],globalTimelinePosts:[],profileDescription:""},a.retrieveUserInfo(),a.retrieveLikedPostsByUser(),a.retrieveLikedCommentsByUser(),a.retrieveTimelinePosts(),a.retrieveGlobalTimelinePosts(),a.retrieveProfileImage(),a.checkDarkMode(),a}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{className:"pageContainer"},o.a.createElement(Z,null),o.a.createElement("header",{className:"navigation"},o.a.createElement($,null)),o.a.createElement(k.g,null,o.a.createElement(k.d,{exact:!0,path:"/",render:function(t){return o.a.createElement(oe,Object.assign({},t,{timelinePosts:e.state.timelinePosts,globalTimelinePosts:e.state.globalTimelinePosts,likedPostsByUser:e.state.likedPostsByUser,likedCommentsByUser:e.state.likedCommentsByUser,loggedInUserFollowing:e.state.loggedInUserFollowing}))}}),o.a.createElement(k.d,{exact:!0,path:"/login",component:E}),o.a.createElement(k.d,{exact:!0,path:"/accountCreation",component:v}),o.a.createElement(k.d,{exact:!0,path:"/timeline",render:function(t){return o.a.createElement(oe,Object.assign({},t,{timelinePosts:e.state.timelinePosts,globalTimelinePosts:e.state.globalTimelinePosts,likedPostsByUser:e.state.likedPostsByUser,likedCommentsByUser:e.state.likedCommentsByUser,loggedInUserFollowing:e.state.loggedInUserFollowing}))}}),o.a.createElement(k.d,{exact:!0,path:"/profile/:username",render:function(t){return o.a.createElement(G,Object.assign({},t,{likedPostsByUser:e.state.likedPostsByUser,loggedInUserFollowing:e.state.loggedInUserFollowing}))}}),o.a.createElement(k.d,{exact:!0,path:"/profile/:username/:postId",render:function(t){return o.a.createElement(ee,Object.assign({},t,{likedPostsByUser:e.state.likedPostsByUser,likedCommentsByUser:e.state.likedCommentsByUser}))}}),o.a.createElement(k.d,{exact:!0,path:"/editProfile",render:function(t){return o.a.createElement(z,Object.assign({},t,{description:e.state.profileDescription}))}}),o.a.createElement(k.d,{exact:!0,path:"/createPost",component:q}),o.a.createElement(k.d,{exact:!0,path:"/settings",component:re}),o.a.createElement(k.d,{exact:!0,path:"/likedPosts",render:function(t){return o.a.createElement(G,Object.assign({},t,{likedPostsByUser:e.state.likedPostsByUser}))}}),o.a.createElement(k.d,{exact:!0,path:"/admin/a8b010",component:ae}),o.a.createElement(k.d,{exact:!0,path:"/about",component:se}),o.a.createElement(k.d,{exact:!0,path:"/faq",component:le}),o.a.createElement(k.d,{exact:!0,path:"/support",component:ie}),o.a.createElement(k.d,{exact:!0,path:"/guidelines",component:ce}),o.a.createElement(k.d,{exact:!0,path:"/passwordRecovery",component:me}),o.a.createElement(k.d,{exact:!0,path:"/CreateArticlePost",component:pe}))),o.a.createElement(te,null))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(l.BrowserRouter,null,o.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.c0a638e9.chunk.js.map